---
# ====== Page: Login Page ====================================
id: 9999
identification: 
  name: Login Page
  alias: LOGIN
  title: WMG - Log In

appearance: 
  page-mode: Normal
  page-template: Login # 46995015385203514332
  template-options: 
  - '#DEFAULT#'

navigation-menu: 
  override-user-interface-level: false

navigation: 
  cursor-focus: Do not focus cursor
  warn-on-unsaved-changes: false

css: 
  inline: |
    .t-Login-region:first-of-type .t-Login-header {padding-bottom: 0}
    .t-Login-logo {
        background-color: whitesmoke;
    }
    .google-style {
        --a-button-background-color: var(--rw-palette-blue-100);
        --a-button-text-color: var(--rw-palette-green-0);
        --a-button-hover-background-color: var(--rw-palette-blue-110);
        --a-button-hover-text-color: var(--a-button-text-color);
        --a-button-hover-border-color: var(--a-button-hover-background-color);
        --a-button-active-background-color: var(--rw-palette-blue-120);
        --a-button-active-text-color: var(--a-button-hover-text-color);
        --a-button-active-border-color: var(--a-button-active-background-color);
        --a-button-focus-background-color: var(--a-button-hover-background-color);
        --a-button-focus-text-color: var(--a-button-hover-text-color);
        --a-button-focus-border-color: var(--a-button-focus-background-color);
    }
    
    .discord-style {
        --a-button-background-color: #5865F2;
        border-radius: 0;
        padding: 0;
    }
    .discord-style .t-Button-label {
        --a-button-text-color: white;
        font-weight: 700;
        font-family: 'Ubuntu', sans-serif;
    }
    .discord-style img {max-height: 48px; padding-top: 3px;}
    .discord-style:hover {
        background-color: #7289DA;
    }
    .discord-style:hover .t-Button-label {
        --a-button-hover-text-color: white;
    }
    
    .legend {
        text-align: center;
        margin: 1rem auto;
    }

security: 
  authentication: Page Is Public

advanced: 
  enable-meta-tags: false

security: 
  deep-linking: Application Default
  page-access-protection: Arguments Must Have Checksum
  form-auto-complete: Off
  browser-cache: Application Default

session-management: 
  rejoin-sessions: Application Default

advanced: 
  enable-duplicate-page-submissions: Yes - Enable page to be re-posted
  reload-on-submit: Only for Success

server-cache: 
  caching: Disabled

regions: 
- # ====== Region: About the Discord Login =====================
  id: 11994967224685644
  identification: 
    title: About the Discord Login
    type: Static Content

  layout: 
    sequence: 10
    parent-region: Player's # 47585929551450469249
    position: SUB_REGIONS
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Blank with Attributes # 46995040627542514343
    template-options: 
    - '#DEFAULT#'
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  header-and-footer: 
    header-text: <div class="legend">As a player, use Discord to sign-in.<br></div>

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: About Social Login ==========================
  id: 11995164792685646
  identification: 
    title: About Social Login
    type: Static Content

  source: 
    html-code: |
      <b>Q:</b> How does this work?<br>
      <b>A:</b> You tell Discord who you are, and Discord will let us know your username, avatar, and banner.<br>
      <br>
      <b>Q:</b> Ok, but why do you need me to login?<br>
      <b>A:</b> This way, we ensure that two players with similar names don't accidentally use each other's accounts. 
      And the Tournament Admins can reach you via Discord.<br>
      <br>
      <b>Q:</b> Will you know my email, name, or phone?<br>
      <b>A:</b> Nope. Zilch. Nada. We don't need it; we don't want it; we don't ask Discord for it.<br>
      <br>
      <b>Q:</b> But what exactly is this witchery?<br>
      <b>A:</b> Ok, if you want to get technical...<br>
      <br>
      We're using the <a href="https://discord.com/developers/docs/topics/oauth2" target="_blank">Oauth2</a> protocol to communicate with Discord securely.<br>
      You log in to Discord and agree to let us know who you are. Discord then vouches for you and gives us your Discord name, discriminator (that little number next to your name), Avatar pointer, and your Discord ID.<br>
      

  layout: 
    sequence: 40
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Inline Popup # 46995091106884514363
    template-options: 
    - '#DEFAULT#'
    - js-dialog-size600x400
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    static-id: aboutSocialLogin
    region-display-selector: true
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Volunteer and Admin's Login =================
  id: 46995211417049514501
  identification: 
    title: Volunteer and Admin's Login
    type: Static Content

  layout: 
    sequence: 20
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Login # 46995098614618514366
    template-options: 
    - '#DEFAULT#'
    - t-Login-region--headerTitle js-removeLandmark
    - js-headingLevel-5
    - margin-top-lg
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    static-id: adminLogin
    region-display-selector: false
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: Text (escape special characters)
      show-line-breaks: true

- # ====== Region: Player's ====================================
  id: 47585929551450469249
  identification: 
    title: Player's
    type: Static Content

  source: 
    html-code: |
      <div class="margin-bottom-sm u-tC">
      <h4>Sign In with Discord</h4>
      <span aria-hidden="true" class="fa fa-arrow-down-alt fa-anim-vertical-shake fa-lg"></span>
      </div>

  layout: 
    sequence: 10
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Login # 46995098614618514366
    template-options: 
    - '#DEFAULT#'
    render-components: Above Content

  image: 
    file-url: '#APP_FILES#img/26f3.svg'

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    static-id: socialSigning
    region-display-selector: true
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

page-items: 
- # ====== Page Item: P9999_USERNAME ===========================
  id: 46995211860692514502
  identification: 
    name: P9999_USERNAME
    type: Text Field

  label: 
    label: Username
    alignment: Right

  settings: 
    subtype: Text
    trim-spaces: None
    text-case: NO CHANGE
    submit-when-enter-pressed: false
    disabled: false

  layout: 
    sequence: 10
    region: Volunteer and Admin's Login # 46995211417049514501
    position: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Hidden # 46995171218955514398
    template-options: 
    - '#DEFAULT#'
    icon: fa-user
    width: 40
    value-placeholder: Username

  validation: 
    value-required: false
    maximum-length: 100

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Request (Memory Only)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P9999_PASSWORD ===========================
  id: 46995212276780514502
  identification: 
    name: P9999_PASSWORD
    type: Password

  label: 
    label: Password
    alignment: Right

  settings: 
    submit-when-enter-pressed: true

  layout: 
    sequence: 20
    region: Volunteer and Admin's Login # 46995211417049514501
    position: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Hidden # 46995171218955514398
    template-options: 
    - '#DEFAULT#'
    icon: fa-key
    width: 40
    value-placeholder: Password

  validation: 
    value-required: false
    maximum-length: 100

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Request (Memory Only)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P9999_REMEMBER ===========================
  id: 46995212702833514502
  identification: 
    name: P9999_REMEMBER
    type: Checkbox

  label: 
    label: Remember username
    alignment: Right

  settings: 
    use-defaults: true

  layout: 
    sequence: 30
    region: Volunteer and Admin's Login # 46995211417049514501
    position: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Hidden # 46995171218955514398
    template-options: 
    - '#DEFAULT#'

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  server-side-condition: 
    type: Expression
    language: PL/SQL
    pl/sql-expression: apex_authentication.persistent_cookies_enabled and not apex_authentication.persistent_auth_enabled

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P9999_PERSISTENT_AUTH ====================
  id: 46995213073432514503
  identification: 
    name: P9999_PERSISTENT_AUTH
    type: Checkbox

  label: 
    label: Remember me
    alignment: Right

  settings: 
    use-defaults: true

  layout: 
    sequence: 30
    region: Volunteer and Admin's Login # 46995211417049514501
    position: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Hidden # 46995171218955514398
    template-options: 
    - '#DEFAULT#'

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  server-side-condition: 
    type: Expression
    language: PL/SQL
    pl/sql-expression: apex_authentication.persistent_auth_enabled

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

buttons: 
- # ====== Button: LEARN_MORE ==================================
  id: 11995058165685645
  identification: 
    button-name: LEARN_MORE
    label: Learn More

  layout: 
    sequence: 10
    region: About the Discord Login # 11994967224685644
    position: BODY
    start-new-layout: false
    start-new-row: true
    row-css-classes: 
    - col-xxs-12
    - col-xs-12
    column: Automatic
    new-column: true
    column-span: Automatic
    alignment: Right

  appearance: 
    button-template: Text with Icon # 46995174047152514400
    hot: false
    template-options: 
    - '#DEFAULT#'
    - t-Button--small
    - t-Button--link
    - t-Button--iconLeft
    - t-Button--stretch

  behavior: 
    action: Defined by Dynamic Action
    execute-validations: true

- # ====== Button: SHOW_ADMIN ==================================
  id: 39559174664969814
  identification: 
    button-name: SHOW_ADMIN
    label: I'm an Admin

  layout: 
    sequence: 100
    region: Volunteer and Admin's Login # 46995211417049514501
    position: CREATE
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Text with Icon # 46995174047152514400
    hot: false
    template-options: 
    - '#DEFAULT#'
    - t-Button--iconRight
    - t-Button--stretch
    icon: fa-lock

  behavior: 
    action: Defined by Dynamic Action
    execute-validations: true

- # ====== Button: LOGIN =======================================
  id: 46995213516087514503
  identification: 
    button-name: LOGIN
    label: Sign In

  layout: 
    sequence: 40
    region: Volunteer and Admin's Login # 46995211417049514501
    position: NEXT
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Text # 46995173980623514400
    hot: true
    template-options: 
    - '#DEFAULT#'

  behavior: 
    action: Submit Page
    execute-validations: true
    warn-on-unsaved-changes: Do Not Check

- # ====== Button: LOGIN_GOOGLE ================================
  id: 47585929199282469245
  identification: 
    button-name: LOGIN_GOOGLE
    label: Sign In with Google

  layout: 
    sequence: 50
    region: Volunteer and Admin's Login # 46995211417049514501
    position: NEXT
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Text with Icon # 46995174047152514400
    hot: false
    template-options: 
    - '#DEFAULT#'
    - t-Button--iconLeft
    css-classes: 
    - google-style
    icon: fa-google

  behavior: 
    action: Redirect to Page in this Application
    target: 
      url: 'f?p=&APP_ID.:1000:&SESSION.:APEX_AUTHENTICATION=google:&DEBUG.:::'
      page: 1000 # auth
      request: APEX_AUTHENTICATION=google

    warn-on-unsaved-changes: Do Not Check

- # ====== Button: LOGIN_DISCORD ===============================
  id: 56024167933120751679
  identification: 
    button-name: LOGIN_DISCORD
    label: <img src="#APP_FILES#img/discord.svg">

  layout: 
    sequence: 5
    region: Player's # 47585929551450469249
    position: NEXT
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Text with Icon # 46995174047152514400
    hot: false
    template-options: 
    - '#DEFAULT#'
    - t-Button--tiny
    - t-Button--iconLeft
    css-classes: 
    - discord-style
    icon: fa-discord

  behavior: 
    action: Redirect to Page in this Application
    target: 
      url: 'f?p=&APP_ID.:1000:&SESSION.:APEX_AUTHENTICATION=discord:&DEBUG.:::'
      page: 1000 # auth
      request: APEX_AUTHENTICATION=discord

    warn-on-unsaved-changes: Do Not Check

  advanced: 
    custom-attributes: 
    - title="Sign
    - In
    - with
    - Discord"

dynamic-actions: 
- # ====== Dynamic Action: About About =========================
  id: 11995271043685647
  identification: 
    name: About About

  execution: 
    sequence: 10

  when: 
    event: EVENT.EVENT.BROWSER.CLICK
    selection-type: Button
    button: LEARN_MORE # 11995058165685645

  execution: 
    event-scope: Static
    type: Immediate

  actions: 
  - # ====== Action: Open Region =================================
    id: 11995388522685648
    identification: 
      action: Open Region

    affected-elements: 
      selection-type: Region
      region: About Social Login # 11995164792685646

    execution: 
      sequence: 10
      event: About About # 11995271043685647
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Show on Focus =======================
  id: 39558607982969809
  identification: 
    name: Show on Focus

  execution: 
    sequence: 20

  when: 
    event: EVENT.EVENT.BROWSER.CLICK
    selection-type: Button
    button: SHOW_ADMIN # 39559174664969814

  execution: 
    event-scope: Static
    type: Immediate

  actions: 
  - # ====== Action: Show ========================================
    id: 39558797222969810
    identification: 
      action: Show

    affected-elements: 
      selection-type: Button
      button: LOGIN_GOOGLE # 47585929199282469245

    execution: 
      sequence: 10
      event: Show on Focus # 39558607982969809
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Show ========================================
    id: 39559451137969817
    identification: 
      action: Show

    affected-elements: 
      selection-type: Button
      button: LOGIN # 46995213516087514503

    execution: 
      sequence: 20
      event: Show on Focus # 39558607982969809
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Show ========================================
    id: 39559517291969818
    identification: 
      action: Show

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P9999_USERNAME
      - P9999_PASSWORD
      - P9999_REMEMBER
      - P9999_PERSISTENT_AUTH

    execution: 
      sequence: 30
      event: Show on Focus # 39558607982969809
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Hide ========================================
    id: 39559651258969819
    identification: 
      action: Hide

    affected-elements: 
      selection-type: Button
      button: SHOW_ADMIN # 39559174664969814

    execution: 
      sequence: 40
      event: Show on Focus # 39558607982969809
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Hide Admin buttons ==================
  id: 39558962754969812
  identification: 
    name: Hide Admin buttons

  execution: 
    sequence: 30

  when: 
    event: EVENT.EVENT.BROWSER.READY

  execution: 
    event-scope: Static

  actions: 
  - # ====== Action: Hide ========================================
    id: 39559089972969813
    identification: 
      action: Hide

    affected-elements: 
      selection-type: Button
      button: LOGIN_GOOGLE # 47585929199282469245

    execution: 
      sequence: 10
      event: Hide Admin buttons # 39558962754969812
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Hide ========================================
    id: 39559285004969815
    identification: 
      action: Hide

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P9999_USERNAME
      - P9999_PASSWORD
      - P9999_REMEMBER
      - P9999_PERSISTENT_AUTH

    execution: 
      sequence: 30
      event: Hide Admin buttons # 39558962754969812
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Hide ========================================
    id: 39559339061969816
    identification: 
      action: Hide

    affected-elements: 
      selection-type: Button
      button: LOGIN # 46995213516087514503

    execution: 
      sequence: 20
      event: Hide Admin buttons # 39558962754969812
      fire-when-event-result-is: True
      fire-on-initialization: false

processes: 
- # ====== Process: Login ======================================
  id: 46995213835520514503
  identification: 
    name: Login
    type: Execute Code

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      apex_authentication.login(
          p_username => :P9999_USERNAME,
          p_password => :P9999_PASSWORD,
          p_set_persistent_auth => nvl(:P9999_PERSISTENT_AUTH, 'N') = 'Y' );

  execution: 
    sequence: 20
    point: Processing
    run-process: Once Per Page Visit (default)

  error: 
    display-location: Inline in Notification

- # ====== Process: Set Username Cookie ========================
  id: 46995214293888514503
  identification: 
    name: Set Username Cookie
    type: Execute Code

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      apex_authentication.send_login_username_cookie (
          p_username => lower(:P9999_USERNAME),
          p_consent  => :P9999_REMEMBER = 'Y' );

  execution: 
    sequence: 10
    point: Processing
    run-process: Once Per Page Visit (default)

  error: 
    display-location: Inline in Notification

- # ====== Process: Get Username Cookie ========================
  id: 46995214645266514504
  identification: 
    name: Get Username Cookie
    type: Execute Code

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      :P9999_USERNAME := apex_authentication.get_login_username_cookie;
      :P9999_REMEMBER := case when :P9999_USERNAME is not null then 'Y' end;

  execution: 
    sequence: 10
    point: Before Header
    run-process: Once Per Page Visit (default)

- # ====== Process: Clear Page(s) Cache ========================
  id: 46995215041373514504
  identification: 
    name: Clear Page(s) Cache
    type: Clear Session State

  settings: 
    type: Clear all Items on the Current Page

  execution: 
    sequence: 30
    point: Processing
    run-process: Once Per Page Visit (default)

  error: 
    display-location: Inline in Notification

