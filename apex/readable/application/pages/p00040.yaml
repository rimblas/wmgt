---
# ====== Page: Room Selections & Assignments =================
id: 40
identification: 
  name: Room Selections & Assignments
  alias: ROOMS
  title: Room Selections & Assignments

appearance: 
  page-mode: Normal
  page-template: Theme Default
  template-options: 
  - '#DEFAULT#'
  - t-NavTabs--inlineLabels-lg
  - t-NavTabs--displayLabels-sm

navigation-menu: 
  override-user-interface-level: true
  list: Tournament Options # 55884590206608414057
  list-position: Top
  list-template: Top Navigation Tabs # 46986647224831702467
  template-options: 
  - '#DEFAULT#'
  - t-NavTabs--inlineLabels-lg
  - t-NavTabs--displayLabels-sm

navigation: 
  cursor-focus: Do not focus cursor
  warn-on-unsaved-changes: false

javascript: 
  execute-when-page-loads: $(".showAvatar").tooltip();

css: 
  inline: |
    .room h2 {font-weight: bold;}
    mark.player {display: block;}
    td#ROOM_NO {
      border-bottom: 1px solid;
      font-size: 1.7em;
      font-weight: 800;
      padding: 5px 0 3px 0px;
    }
    .t-Report-colHead {display: none;}
    
    #timeLegend {outline: 1px solid red;}
    #timeLegend table { width: 100%;}
    .tzClass {padding-left: .4rem;}
    
    .-wm-discord-link {
        margin-right: 1em;
    }

security: 
  authentication: Page Is Public

advanced: 
  enable-meta-tags: false

security: 
  deep-linking: Application Default
  page-access-protection: Unrestricted
  form-auto-complete: Off
  browser-cache: Application Default

session-management: 
  rejoin-sessions: Application Default

advanced: 
  enable-duplicate-page-submissions: Yes - Enable page to be re-posted
  reload-on-submit: Only for Success

server-cache: 
  caching: Disabled

help: 
  help-text: |
    The private room names will be/are <i>WMGT1</i>, <i>WMGT2</i>, etc... Rooms will be available 30 min before the 1st group is due to play.<br>
    Find your room and join a few minutes before so you can start your round precisely on time.<br>
    <br>
    ðŸš¨ <b>VERY IMPORTANT</b> ðŸš¨ <br>
    <ol>
        <li>Play the Easy Course round first</li>
        <li>Take picture</li>
        <li>Play the Hard Course round last</li>
        <li>Submit your scores back here <a href="#0" onclick="apex.util.getTopApex().jQuery('#ENTER_ROUNDS').click()">3. Enter Scores</a> <i>(Posting of pictures is NOT submission of scores)</i></li>
        <li><b>One</b> person in the room must post pictures in the <a href="https://discord.com/channels/752022800562389015/763534404285890560" target="_blank">#tournament-chat</a> channel</li>
    </ol>
    <br>
    Don't forget to go to <a href="https://discord.com/channels/752022800562389015/763542150877020190" target="_blank">#tournament-info</a> and find the link to submit your scores after you finish your rounds!<br>
    <br>
    <b>Make sure the timestamp is visible in your pictures</b>
    (by clicking the 3 dots in the bottom right hand corner)<br>
    <br>
    AND<br>
    <br>
    If you're the first person in the room <b>DO NOT CLICK MAIN MENU</b> <b>until</b> you have <b>asked</b> if someone has taken a picture after the rounds.
    

regions: 
- # ====== Region: About the rooms =============================
  id: 3820738454911618
  identification: 
    title: About the rooms
    type: Static Content

  source: 
    html-code: |
      The private room names will be/are <i>WMGT1</i>, <i>WMGT2</i>, etc... Rooms will be available 30 min before the 1st group is due to play.<br>
      Find your room and join a few minutes before so you can start your round precisely on time.<br>
      <br>
      ðŸš¨ <b>VERY IMPORTANT</b> ðŸš¨ <br>
      <ol>
          <li>Play the Easy Course round first</li>
          <li>Take picture</li>
          <li>Play the Hard Course round last</li>
          <li>Submit your scores back here <a href="#0" onclick="$('#ENTER_ROUNDS').click()">3. Enter Scores</a> <i>(Posting of pictures is NOT submission of scores)</i></li>
          <li><b>One</b> person in the room must post pictures in the <a href="https://discord.com/channels/752022800562389015/763534404285890560" target="_blank">#tournament-chat</a> channel</li>
      </ol>
      <br>
      Don't forget to go to <a href="https://discord.com/channels/752022800562389015/763542150877020190" target="_blank">#tournament-info</a> and find the link to submit your scores after you finish your rounds!<br>
      <br>
      <b>Make sure the timestamp is visible in your pictures</b>
      (by clicking the 3 dots in the bottom right hand corner)<br>
      <br>
      AND<br>
      <br>
      If you're the first person in the room <b>DO NOT CLICK MAIN MENU</b> <b>until</b> you have <b>asked</b> if someone has taken a picture after the rounds.
      

  layout: 
    sequence: 99
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Content Block # 46986548188719702425
    template-options: 
    - '#DEFAULT#'
    - t-ContentBlock--h2
    - t-ContentBlock--headingFontAlt
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: {slots.js} ==================================
  id: 4913632877479590
  identification: 
    title: '{slots.js}'
    type: Dynamic Content

  source: 
    language: PL/SQL
    pl/sql-function-body-returning-a-clob: |
      declare 
        t varchar2(4000);
        tz varchar2(100);
      begin
      
      with tz as (
      select :P40_TZ tz from dual 
      )
      , slots_n as (
          select level n
           from dual
           connect by level <= 6
          )
      , slots as (
          select slot || ':00' d, slot t
          from (
              select lpad( (n-1)*4,2,0) slot
              from slots_n
          )
      )
      , ts as (
          select s.session_date
          from wmg_tournament_sessions s
          where s.tournament_id in (
              select id
                from wmg_tournaments
               where current_flag = 'Y'
          )
            and s.completed_ind = 'N'
          order by s.session_date
          fetch first 1 rows only
      )
      select json_arrayagg(
             to_char(local_tz, 'fmDy, fmMonth fmDD') 
            || ' ' 
            || case when tz like 'US/%' or tz like 'America%' then
                 ltrim(to_char(local_tz, 'HH:MI PM'), '0')
               else 
                 to_char(local_tz, 'HH24:MI')
               end
              )
              , tz
         into t, tz
        from (
          select s.session_date
               , slots.d
               , tz.tz
               , to_utc_timestamp_tz(to_char(s.session_date, 'yyyy-mm-dd') || 'T' || slots.d) at time zone tz.tz local_tz
          from ts s
             , tz
             , slots
         );
      
      return '<script>var s = ' || nvl(t, '["","","","","",""]') || ', tz = "' || tz || '";</script>';
      exception
      when others then
      return '<script>var s = ["","","","","",""], tz = "UTC";</script>';
      end;
      

  layout: 
    sequence: 119
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Blank with Attributes # 46986519704134702414
    template-options: 
    - '#DEFAULT#'
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  comments: 
    comments: generate a JS variable with the converted times so they can be added to each time slot.

  attributes: 
    performance: 
      lazy-loading: false

- # ====== Region: 00:00 =======================================
  id: 7048711940745770706
  identification: 
    title: '00:00'
    type: Classic Report

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      select case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then nvl2(p.room_no, 'WMGT', '') || p.room_no else '' end room_no
           , case when p.player_id = :G_PLAYER_ID then
              '<mark class="player">'
             end
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then
              case when :P40_TD_FLAG = 'Y' and :P40_SHOW_AVATARS_IND = 'Y' then wmg_discord.avatar_link(p_discord_id => p.discord_id) end ||
              ' <a href="' ||
                apex_page.get_url(
                    p_page => 30
                  , p_items => 'P30_PLAYER_ID,P30_PAGE_ID_PREV'
                  , p_values => p.player_id || ',' || :APP_PAGE_ID
                ) || '">' 
             end
          || apex_escape.html(p.player_name)
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then '</a>' end
          || case when p.player_id = :G_PLAYER_ID then
              '</mark>'
             end players
      from wmg_tournament_player_v p
         , wmg_tournament_sessions s
      where s.id =  p.tournament_session_id
        and p.time_slot = '00:00'
        and p.active_ind = 'Y'
        and p.tournament_session_id = :G_CURRENT_SESSION_ID
      order by case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then
                 p.room_no 
               else 0 end, p.tournament_player_id
      

  layout: 
    sequence: 29
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    column-css-classes: 
    - room
    - col-xxs-12
    - col-xs-12
    - col-sm-4
    - col-md-4

  appearance: 
    template: Standard # 46986580184360702438
    template-options: 
    - '#DEFAULT#'
    - t-Region--accent1
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: true
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    layout: 
      number-of-rows-type: Static Value
      number-of-rows: 200

    appearance: 
      template-type: Theme
      template: Standard # 46986618016296702453
      template-options: 
      - '#DEFAULT#'
      - t-Report--stretch
      - t-Report--staticRowColors
      - t-Report--rowHighlightOff
      - t-Report--noBorders
      - t-Report--hideNoPagination

    pagination: 
      type: No Pagination (Show All Rows)
      partial-page-refresh: true

    performance: 
      lazy-loading: false

    break-formatting: 
      break-columns: First Column
      style: Repeat Headings on Break
      before-row: <hr>
      column-break-format: 'WMGT #ROOM_NO#'

    advanced: 
      strip-html: false
      sort-nulls: Last

    heading: 
      type: None

    download: 
      csv-export-enabled: false

    printing: 
      enabled: false

  columns: 
  - # ====== Column: PLAYERS =====================================
    id: 7048712069156770707
    identification: 
      column-name: PLAYERS
      type: Plain Text

    heading: 
      heading: Players
      alignment: center

    layout: 
      sequence: 20
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: false

  - # ====== Column: ROOM_NO =====================================
    id: 40380888859088957206
    identification: 
      column-name: ROOM_NO
      type: Plain Text

    heading: 
      heading: Room
      alignment: center

    layout: 
      sequence: 10
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

- # ====== Region: 04:00 =======================================
  id: 7048712164052770708
  identification: 
    title: '04:00'
    type: Classic Report

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      select case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then nvl2(p.room_no, 'WMGT', '') || p.room_no else '' end room_no
           , case when p.player_id = :G_PLAYER_ID then
              '<mark class="player">'
             end
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then
              case when :P40_TD_FLAG = 'Y' and :P40_SHOW_AVATARS_IND = 'Y' then wmg_discord.avatar_link(p_discord_id => p.discord_id) end ||
              ' <a href="' ||
                apex_page.get_url(
                    p_page => 30
                  , p_items => 'P30_PLAYER_ID,P30_PAGE_ID_PREV'
                  , p_values => p.player_id || ',' || :APP_PAGE_ID
                ) || '">' 
             end
          || apex_escape.html(p.player_name)
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then '</a>' end
          || case when p.player_id = :G_PLAYER_ID then
              '</mark>'
             end players
      from wmg_tournament_player_v p
         , wmg_tournament_sessions s
      where s.id =  p.tournament_session_id
        and p.time_slot = '04:00'
        and p.active_ind = 'Y'
        and p.tournament_session_id = :G_CURRENT_SESSION_ID
      order by case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then
                 p.room_no 
               else 0 end, p.tournament_player_id
      

  layout: 
    sequence: 39
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    column-css-classes: 
    - room
    - col-xxs-12
    - col-xs-12
    - col-sm-4
    - col-md-4

  appearance: 
    template: Standard # 46986580184360702438
    template-options: 
    - '#DEFAULT#'
    - t-Region--accent2
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: true
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    layout: 
      number-of-rows-type: Static Value
      number-of-rows: 200

    appearance: 
      template-type: Theme
      template: Standard # 46986618016296702453
      template-options: 
      - '#DEFAULT#'
      - t-Report--stretch
      - t-Report--staticRowColors
      - t-Report--rowHighlightOff
      - t-Report--noBorders
      - t-Report--hideNoPagination

    pagination: 
      type: No Pagination (Show All Rows)
      partial-page-refresh: true

    performance: 
      lazy-loading: false

    break-formatting: 
      break-columns: First Column
      style: Repeat Headings on Break

    advanced: 
      strip-html: false
      sort-nulls: Last

    heading: 
      type: None

    download: 
      csv-export-enabled: false

    printing: 
      enabled: false

  columns: 
  - # ====== Column: PLAYERS =====================================
    id: 7048712218368770709
    identification: 
      column-name: PLAYERS
      type: Plain Text

    heading: 
      heading: Players
      alignment: center

    layout: 
      sequence: 20
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: false

  - # ====== Column: ROOM_NO =====================================
    id: 40380888962540957207
    identification: 
      column-name: ROOM_NO
      type: Plain Text

    heading: 
      heading: Room No
      alignment: center

    layout: 
      sequence: 10
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

- # ====== Region: 08:00 =======================================
  id: 7048712302867770710
  identification: 
    title: '08:00'
    type: Classic Report

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      select case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then nvl2(p.room_no, 'WMGT', '') || p.room_no else '' end room_no
           , case when p.player_id = :G_PLAYER_ID then
              '<mark class="player">'
             end
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then
              case when :P40_TD_FLAG = 'Y' and :P40_SHOW_AVATARS_IND = 'Y' then wmg_discord.avatar_link(p_discord_id => p.discord_id) end ||
              ' <a href="' ||
                apex_page.get_url(
                    p_page => 30
                  , p_items => 'P30_PLAYER_ID,P30_PAGE_ID_PREV'
                  , p_values => p.player_id || ',' || :APP_PAGE_ID
                ) || '">' 
             end
          || apex_escape.html(p.player_name)
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then '</a>' end
          || case when p.player_id = :G_PLAYER_ID then
              '</mark>'
             end players
      from wmg_tournament_player_v p
         , wmg_tournament_sessions s
      where s.id =  p.tournament_session_id
        and p.time_slot = '08:00'
        and p.active_ind = 'Y'
        and p.tournament_session_id = :G_CURRENT_SESSION_ID
      order by case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then
                 p.room_no 
               else 0 end, p.tournament_player_id
      

  layout: 
    sequence: 49
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    column-css-classes: 
    - room
    - col-xxs-12
    - col-xs-12
    - col-sm-4
    - col-md-4

  appearance: 
    template: Standard # 46986580184360702438
    template-options: 
    - '#DEFAULT#'
    - t-Region--accent3
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: true
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    layout: 
      number-of-rows-type: Static Value
      number-of-rows: 200

    appearance: 
      template-type: Theme
      template: Standard # 46986618016296702453
      template-options: 
      - '#DEFAULT#'
      - t-Report--stretch
      - t-Report--staticRowColors
      - t-Report--rowHighlightOff
      - t-Report--noBorders
      - t-Report--hideNoPagination

    pagination: 
      type: No Pagination (Show All Rows)
      partial-page-refresh: true

    performance: 
      lazy-loading: false

    break-formatting: 
      break-columns: First Column
      style: Repeat Headings on Break

    advanced: 
      strip-html: false
      sort-nulls: Last

    heading: 
      type: None

    download: 
      csv-export-enabled: false

    printing: 
      enabled: false

  columns: 
  - # ====== Column: PLAYERS =====================================
    id: 7048712466995770711
    identification: 
      column-name: PLAYERS
      type: Plain Text

    heading: 
      heading: Players
      alignment: center

    layout: 
      sequence: 20
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: false

  - # ====== Column: ROOM_NO =====================================
    id: 40380889042724957208
    identification: 
      column-name: ROOM_NO
      type: Plain Text

    heading: 
      heading: Room No
      alignment: center

    layout: 
      sequence: 10
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

- # ====== Region: 12:00 =======================================
  id: 7048712542392770712
  identification: 
    title: '12:00'
    type: Classic Report

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      select case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then nvl2(p.room_no, 'WMGT', '') || p.room_no else '' end room_no
           , case when p.player_id = :G_PLAYER_ID then
              '<mark class="player">'
             end
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then
              case when :P40_TD_FLAG = 'Y' and :P40_SHOW_AVATARS_IND = 'Y' then wmg_discord.avatar_link(p_discord_id => p.discord_id) end ||
              ' <a href="' ||
                apex_page.get_url(
                    p_page => 30
                  , p_items => 'P30_PLAYER_ID,P30_PAGE_ID_PREV'
                  , p_values => p.player_id || ',' || :APP_PAGE_ID
                ) || '">' 
             end
          || apex_escape.html(p.player_name)
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then '</a>' end
          || case when p.player_id = :G_PLAYER_ID then
              '</mark>'
             end players
      from wmg_tournament_player_v p
         , wmg_tournament_sessions s
      where s.id =  p.tournament_session_id
        and p.time_slot = '12:00'
        and p.active_ind = 'Y'
        and p.tournament_session_id = :G_CURRENT_SESSION_ID
      order by case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then
                 p.room_no 
               else 0 end, p.tournament_player_id
      

  layout: 
    sequence: 59
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    column-css-classes: 
    - room
    - col-xxs-12
    - col-xs-12
    - col-sm-4
    - col-md-4

  appearance: 
    template: Standard # 46986580184360702438
    template-options: 
    - '#DEFAULT#'
    - t-Region--accent4
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: true
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    layout: 
      number-of-rows-type: Static Value
      number-of-rows: 200

    appearance: 
      template-type: Theme
      template: Standard # 46986618016296702453
      template-options: 
      - '#DEFAULT#'
      - t-Report--stretch
      - t-Report--staticRowColors
      - t-Report--rowHighlightOff
      - t-Report--noBorders
      - t-Report--hideNoPagination

    pagination: 
      type: No Pagination (Show All Rows)
      partial-page-refresh: true

    performance: 
      lazy-loading: false

    break-formatting: 
      break-columns: First Column
      style: Repeat Headings on Break

    advanced: 
      strip-html: false
      sort-nulls: Last

    heading: 
      type: None

    download: 
      csv-export-enabled: false

    printing: 
      enabled: false

  columns: 
  - # ====== Column: PLAYERS =====================================
    id: 7048712626457770713
    identification: 
      column-name: PLAYERS
      type: Plain Text

    heading: 
      heading: Players
      alignment: center

    layout: 
      sequence: 20
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: false

  - # ====== Column: ROOM_NO =====================================
    id: 40380889154092957209
    identification: 
      column-name: ROOM_NO
      type: Plain Text

    heading: 
      heading: Room No
      alignment: center

    layout: 
      sequence: 10
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

- # ====== Region: 16:00 =======================================
  id: 7048712784431770714
  identification: 
    title: '16:00'
    type: Classic Report

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      select case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then nvl2(p.room_no, 'WMGT', '') || p.room_no else '' end room_no
           , case when p.player_id = :G_PLAYER_ID then
              '<mark class="player">'
             end
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then
              case when :P40_TD_FLAG = 'Y' and :P40_SHOW_AVATARS_IND = 'Y' then wmg_discord.avatar_link(p_discord_id => p.discord_id) end ||
              ' <a href="' ||
                apex_page.get_url(
                    p_page => 30
                  , p_items => 'P30_PLAYER_ID,P30_PAGE_ID_PREV'
                  , p_values => p.player_id || ',' || :APP_PAGE_ID
                ) || '">' 
             end
          || apex_escape.html(p.player_name)
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then '</a>' end
          || case when p.player_id = :G_PLAYER_ID then
              '</mark>'
             end players
      from wmg_tournament_player_v p
         , wmg_tournament_sessions s
      where s.id =  p.tournament_session_id
        and p.time_slot = '16:00'
        and p.active_ind = 'Y'
        and p.tournament_session_id = :G_CURRENT_SESSION_ID
      order by case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then
                 p.room_no 
               else 0 end, p.tournament_player_id
      

  layout: 
    sequence: 69
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    column-css-classes: 
    - room
    - col-xxs-12
    - col-xs-12
    - col-sm-4
    - col-md-4

  appearance: 
    template: Standard # 46986580184360702438
    template-options: 
    - '#DEFAULT#'
    - t-Region--accent5
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: true
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    layout: 
      number-of-rows-type: Static Value
      number-of-rows: 200

    appearance: 
      template-type: Theme
      template: Standard # 46986618016296702453
      template-options: 
      - '#DEFAULT#'
      - t-Report--stretch
      - t-Report--staticRowColors
      - t-Report--rowHighlightOff
      - t-Report--noBorders
      - t-Report--hideNoPagination

    pagination: 
      type: No Pagination (Show All Rows)
      partial-page-refresh: true

    performance: 
      lazy-loading: false

    break-formatting: 
      break-columns: First Column
      style: Repeat Headings on Break

    advanced: 
      strip-html: false
      sort-nulls: Last

    heading: 
      type: None

    download: 
      csv-export-enabled: false

    printing: 
      enabled: false

  columns: 
  - # ====== Column: PLAYERS =====================================
    id: 7048712840826770715
    identification: 
      column-name: PLAYERS
      type: Plain Text

    heading: 
      heading: Players
      alignment: center

    layout: 
      sequence: 20
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: false

  - # ====== Column: ROOM_NO =====================================
    id: 40380889236197957210
    identification: 
      column-name: ROOM_NO
      type: Plain Text

    heading: 
      heading: Room No
      alignment: center

    layout: 
      sequence: 10
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

- # ====== Region: 20:00 =======================================
  id: 7048712900836770716
  identification: 
    title: '20:00'
    type: Classic Report

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      select case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then nvl2(p.room_no, 'WMGT', '') || p.room_no else '' end room_no
           , case when p.player_id = :G_PLAYER_ID then
              '<mark class="player">'
             end
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then
              case when :P40_TD_FLAG = 'Y' and :P40_SHOW_AVATARS_IND = 'Y' then wmg_discord.avatar_link(p_discord_id => p.discord_id) end ||
              ' <a href="' ||
                apex_page.get_url(
                    p_page => 30
                  , p_items => 'P30_PLAYER_ID,P30_PAGE_ID_PREV'
                  , p_values => p.player_id || ',' || :APP_PAGE_ID
                ) || '">' 
             end
          || apex_escape.html(p.player_name)
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then '</a>' end
          || case when p.player_id = :G_PLAYER_ID then
              '</mark>'
             end players
      from wmg_tournament_player_v p
         , wmg_tournament_sessions s
      where s.id =  p.tournament_session_id
        and p.time_slot = '20:00'
        and p.active_ind = 'Y'
        and p.tournament_session_id = :G_CURRENT_SESSION_ID
      order by case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then
                 p.room_no 
               else 0 end, p.tournament_player_id
      

  layout: 
    sequence: 79
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    column-css-classes: 
    - room
    - col-xxs-12
    - col-xs-12
    - col-sm-4
    - col-md-4

  appearance: 
    template: Standard # 46986580184360702438
    template-options: 
    - '#DEFAULT#'
    - t-Region--accent6
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: true
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    layout: 
      number-of-rows-type: Static Value
      number-of-rows: 200

    appearance: 
      template-type: Theme
      template: Standard # 46986618016296702453
      template-options: 
      - '#DEFAULT#'
      - t-Report--stretch
      - t-Report--staticRowColors
      - t-Report--rowHighlightOff
      - t-Report--noBorders
      - t-Report--hideNoPagination

    pagination: 
      type: No Pagination (Show All Rows)
      partial-page-refresh: true

    performance: 
      lazy-loading: false

    break-formatting: 
      break-columns: First Column
      style: Repeat Headings on Break

    advanced: 
      strip-html: false
      sort-nulls: Last

    heading: 
      type: None

    download: 
      csv-export-enabled: false

    printing: 
      enabled: false

  columns: 
  - # ====== Column: PLAYERS =====================================
    id: 7048713050782770717
    identification: 
      column-name: PLAYERS
      type: Plain Text

    heading: 
      heading: Players
      alignment: center

    layout: 
      sequence: 20
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: false

  - # ====== Column: ROOM_NO =====================================
    id: 40380889327231957211
    identification: 
      column-name: ROOM_NO
      type: Plain Text

    heading: 
      heading: Room No
      alignment: center

    layout: 
      sequence: 10
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

- # ====== Region: {legend} ====================================
  id: 24442383184650124347
  identification: 
    title: '{legend}'
    type: Classic Report

  source: 
    location: Local Database
    type: SQL Query
    sql-query: "select 'The 00:00, 04:00, 08:00, 12:00, 16:00, 20:00 times are in UTC. The times above the time slots are in ' || :P40_TZ legend from dual "

  layout: 
    sequence: 6
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Blank with Attributes # 46986519704134702414
    template-options: 
    - '#DEFAULT#'
    - margin-bottom-md
    - margin-left-none
    - margin-right-none
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    static-id: timeLegend
    region-display-selector: false
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    layout: 
      number-of-rows-type: Static Value
      number-of-rows: 15

    appearance: 
      template-type: Predefined
      template: HTML (standard)

    pagination: 
      type: No Pagination (Show All Rows)
      partial-page-refresh: false

    break-formatting: 
      break-columns: No Break

    advanced: 
      strip-html: false
      sort-nulls: Last

    heading: 
      type: None

    download: 
      csv-export-enabled: false

    printing: 
      enabled: false

  columns: 
  - # ====== Column: LEGEND ======================================
    id: 4914069945479594
    identification: 
      column-name: LEGEND
      type: Plain Text

    heading: 
      heading: Legend
      alignment: center

    layout: 
      sequence: 10
      column-alignment: center

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: true

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

- # ====== Region: {Regions} ===================================
  id: 40380889409532957212
  identification: 
    title: '{Regions}'
    type: Region Display Selector

  layout: 
    sequence: 10
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: true
    row-css-classes: 
    - hidden-md-up
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard # 46986580184360702438
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--removeHeader js-removeLandmark
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    static-id: regionRDS
    region-display-selector: false
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      mode: Scroll Window
      remember-last-selection: false

- # ====== Region: Next Tournament =============================
  id: 65122274469799667171
  identification: 
    title: Next Tournament
    type: Classic Report

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      select s.session_date
           , s.easy_course_code, nvl(ec.name, 'TBD -') easy_course
           , s.hard_course_code, nvl(hc.name, 'TBD -') hard_course
           , (select count(*) from wmg_tournament_players p where p.tournament_session_id = s.tournament_session_id and p.active_ind = 'Y') players
      from wmg_tournament_sessions_v s
         , wmg_courses ec
         , wmg_courses hc
      where s.easy_course_id = ec.id (+)
        and s.hard_course_id = hc.id (+)
        and s.tournament_session_id = :G_CURRENT_SESSION_ID
      /*
        and s.tournament_id in (
          select id
            from wmg_tournaments
           where current_flag = 'Y'
      )
      and session_date+1 > sysdate
      */
      order by session_date
      fetch first 1 rows only

  layout: 
    sequence: 5
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: true
    column: 4
    new-column: true
    column-span: 6

  appearance: 
    template: Alert # 46986514536301702411
    template-options: 
    - '#DEFAULT#'
    - t-Alert--colorBG
    - t-Alert--horizontal
    - t-Alert--noIcon
    - t-Alert--info
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    layout: 
      number-of-rows-type: Static Value
      number-of-rows: 15

    appearance: 
      template-type: Theme
      template: Standard # 46986618016296702453
      template-options: 
      - '#DEFAULT#'
      - t-Report--staticRowColors
      - t-Report--rowHighlightOff
      - t-Report--noBorders

    pagination: 
      type: No Pagination (Show All Rows)
      partial-page-refresh: true

    performance: 
      lazy-loading: false

    break-formatting: 
      break-columns: No Break

    advanced: 
      strip-html: false
      sort-nulls: Last

    heading: 
      type: None

    download: 
      csv-export-enabled: false

    printing: 
      enabled: false

  columns: 
  - # ====== Column: PLAYERS =====================================
    id: 40386535573272083537
    identification: 
      column-name: PLAYERS
      type: Hidden Column

    layout: 
      sequence: 30

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: EASY_COURSE_CODE ============================
    id: 40386535800417083538
    identification: 
      column-name: EASY_COURSE_CODE
      type: Hidden Column

    layout: 
      sequence: 40

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: HARD_COURSE_CODE ============================
    id: 40386536296051083538
    identification: 
      column-name: HARD_COURSE_CODE
      type: Hidden Column

    layout: 
      sequence: 50

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: EASY_COURSE =================================
    id: 40386536668892083538
    identification: 
      column-name: EASY_COURSE
      type: Hidden Column

    layout: 
      sequence: 60

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: HARD_COURSE =================================
    id: 40386537021954083539
    identification: 
      column-name: HARD_COURSE
      type: Hidden Column

    layout: 
      sequence: 70

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: SESSION_DATE ================================
    id: 40386537488549083539
    identification: 
      column-name: SESSION_DATE
      type: Plain Text

    heading: 
      heading: Session Date
      alignment: center

    layout: 
      sequence: 20
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    appearance: 
      format-mask: fmDay, fmMonth fmDD, YYYY

    column-formatting: 
      html-expression: |
        The next tournament is on #SESSION_DATE#. Registered Players: <b>#PLAYERS#</b><br>
        <br>
        The courses are:<br>
        â€¢ #EASY_COURSE_CODE# - #EASY_COURSE#<br>
        â€¢ #HARD_COURSE_CODE# - #HARD_COURSE#

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

page-items: 
- # ====== Page Item: P40_TD_FLAG ==============================
  id: 3820283865911614
  identification: 
    name: P40_TD_FLAG
    type: Hidden

  settings: 
    value-protected: true

  layout: 
    sequence: 10
    region: '00:00' # 7048711940745770706
    position: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

  comments: 
    comments: Set when a TD is viewing

- # ====== Page Item: P40_TZ ===================================
  id: 13608040568876100
  identification: 
    name: P40_TZ
    type: Hidden

  settings: 
    value-protected: true

  layout: 
    sequence: 20
    region: '00:00' # 7048711940745770706
    position: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P40_SHOW_AVATARS_IND =====================
  id: 29406978749118110
  identification: 
    name: P40_SHOW_AVATARS_IND
    type: Switch

  label: 
    label: <span aria-hidden="true" class="fa fa-user-man showAvatar" title="Show Avatars?"></span>
    alignment: Left

  settings: 
    use-defaults: true

  layout: 
    sequence: 10
    region: Breadcrumb # 58998669373500537434
    position: NEXT
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating # 46986650580145702469
    template-options: 
    - '#DEFAULT#'

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Ignore

  source: 
    type: Null
    used: Only when current value in session state is null

  default: 
    type: Static
    static-value: N

  session-state: 
    storage: Per Session (Persistent)

  security: 
    authorization-scheme: Administration Rights # 46986682652284702496
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

buttons: 
- # ====== Button: OPEN_ROOMS ==================================
  id: 3819029434911601
  identification: 
    button-name: OPEN_ROOMS
    label: Open Rooms

  layout: 
    sequence: 30
    region: Breadcrumb # 58998669373500537434
    position: NEXT
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Text with Icon # 46986653123744702471
    hot: false
    template-options: 
    - '#DEFAULT#'
    - t-Button--success
    - t-Button--iconLeft
    - t-Button--hoverIconPush
    icon: fa-unlock

  behavior: 
    action: Submit Page
    execute-validations: true
    warn-on-unsaved-changes: Do Not Check

  server-side-condition: 
    type: Rows returned
    sql-query: "select 1 from wmg_tournament_sessions where id = :G_CURRENT_SESSION_ID and rooms_defined_flag = 'Y' and rooms_open_flag is null"

  security: 
    authorization-scheme: Tournament Admin # 55893512303411682019

- # ====== Button: ENTER_ROUNDS ================================
  id: 24234755650737318
  identification: 
    button-name: ENTER_ROUNDS
    label: 3.Enter Rounds

  layout: 
    sequence: 10
    region: About the rooms # 3820738454911618
    position: BODY
    start-new-layout: false
    start-new-row: true
    row-css-classes: 
    - u-vh
    column: Automatic
    new-column: true
    column-span: Automatic
    alignment: Left center

  appearance: 
    button-template: Text with Icon # 46986653123744702471
    hot: false
    template-options: 
    - '#DEFAULT#'
    - t-Button--iconLeft
    icon: fa-number-3

  behavior: 
    action: Redirect to Page in this Application
    target: 
      url: 'f?p=&APP_ID.:50:&SESSION.::&DEBUG.:50::'
      page: 50 # Enter Rounds
      clear-cache: 50

    warn-on-unsaved-changes: Do Not Check

  advanced: 
    static-id: ENTER_ROUNDS

- # ====== Button: ASSIGN_ROOM =================================
  id: 24442383289129124348
  identification: 
    button-name: ASSIGN_ROOM
    label: Assign Rooms...

  layout: 
    sequence: 20
    region: Breadcrumb # 58998669373500537434
    position: NEXT
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Text with Icon # 46986653123744702471
    hot: false
    template-options: 
    - '#DEFAULT#'
    - t-Button--iconLeft
    icon: fa-refresh

  behavior: 
    action: Defined by Dynamic Action
    execute-validations: true

  server-side-condition: 
    type: Rows returned
    sql-query: 'select 1 from wmg_tournament_sessions where id = :G_CURRENT_SESSION_ID and rooms_open_flag is null'

  security: 
    authorization-scheme: Tournament Admin # 55893512303411682019

- # ====== Button: EDIT_00 =====================================
  id: 40380889514731957213
  identification: 
    button-name: EDIT_00
    label: 'Edit 00:00'

  layout: 
    sequence: 10
    region: '00:00' # 7048711940745770706
    position: EDIT
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Icon # 46986652388380702470
    hot: false
    template-options: 
    - '#DEFAULT#'
    icon: fa-chevron-right

  behavior: 
    action: Redirect to Page in this Application
    target: 
      url: 'f?p=&APP_ID.:42:&SESSION.::&DEBUG.:42:P42_SLOT:\00:00\'
      page: 42 # Change Rooms
      clear-cache: 42
      values: 
        p42_slot: '00:00'

    warn-on-unsaved-changes: Do Not Check

  security: 
    authorization-scheme: Tournament Admin # 55893512303411682019

- # ====== Button: EDIT_04 =====================================
  id: 40380890525334957223
  identification: 
    button-name: EDIT_04
    label: 'Edit 04:00'

  layout: 
    sequence: 20
    region: '04:00' # 7048712164052770708
    position: EDIT
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Icon # 46986652388380702470
    hot: false
    template-options: 
    - '#DEFAULT#'
    icon: fa-chevron-right

  behavior: 
    action: Redirect to Page in this Application
    target: 
      url: 'f?p=&APP_ID.:42:&SESSION.::&DEBUG.:42:P42_SLOT:\04:00\'
      page: 42 # Change Rooms
      clear-cache: 42
      values: 
        p42_slot: '04:00'

    warn-on-unsaved-changes: Do Not Check

  security: 
    authorization-scheme: Tournament Admin # 55893512303411682019

- # ====== Button: EDIT_08 =====================================
  id: 40380890629784957224
  identification: 
    button-name: EDIT_08
    label: 'Edit 08:00'

  layout: 
    sequence: 10
    region: '08:00' # 7048712302867770710
    position: EDIT
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Icon # 46986652388380702470
    hot: false
    template-options: 
    - '#DEFAULT#'
    icon: fa-chevron-right

  behavior: 
    action: Redirect to Page in this Application
    target: 
      url: 'f?p=&APP_ID.:42:&SESSION.::&DEBUG.:42:P42_SLOT:\08:00\'
      page: 42 # Change Rooms
      clear-cache: 42
      values: 
        p42_slot: '08:00'

    warn-on-unsaved-changes: Do Not Check

  security: 
    authorization-scheme: Tournament Admin # 55893512303411682019

- # ====== Button: EDIT_12 =====================================
  id: 40380890763465957225
  identification: 
    button-name: EDIT_12
    label: 'Edit 12:00'

  layout: 
    sequence: 10
    region: '12:00' # 7048712542392770712
    position: EDIT
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Icon # 46986652388380702470
    hot: false
    template-options: 
    - '#DEFAULT#'
    icon: fa-chevron-right

  behavior: 
    action: Redirect to Page in this Application
    target: 
      url: 'f?p=&APP_ID.:42:&SESSION.::&DEBUG.:42:P42_SLOT:\12:00\'
      page: 42 # Change Rooms
      clear-cache: 42
      values: 
        p42_slot: '12:00'

    warn-on-unsaved-changes: Do Not Check

  security: 
    authorization-scheme: Tournament Admin # 55893512303411682019

- # ====== Button: EDIT_16 =====================================
  id: 40380890847370957226
  identification: 
    button-name: EDIT_16
    label: 'Edit 16:00'

  layout: 
    sequence: 10
    region: '16:00' # 7048712784431770714
    position: EDIT
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Icon # 46986652388380702470
    hot: false
    template-options: 
    - '#DEFAULT#'
    icon: fa-chevron-right

  behavior: 
    action: Redirect to Page in this Application
    target: 
      url: 'f?p=&APP_ID.:42:&SESSION.::&DEBUG.:42:P42_SLOT:\16:00\'
      page: 42 # Change Rooms
      clear-cache: 42
      values: 
        p42_slot: '16:00'

    warn-on-unsaved-changes: Do Not Check

  security: 
    authorization-scheme: Tournament Admin # 55893512303411682019

- # ====== Button: EDIT_20 =====================================
  id: 40380890926550957227
  identification: 
    button-name: EDIT_20
    label: 'Edit 20:00'

  layout: 
    sequence: 10
    region: '20:00' # 7048712900836770716
    position: EDIT
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Icon # 46986652388380702470
    hot: false
    template-options: 
    - '#DEFAULT#'
    icon: fa-chevron-right

  behavior: 
    action: Redirect to Page in this Application
    target: 
      url: 'f?p=&APP_ID.:42:&SESSION.::&DEBUG.:42:P42_SLOT:\20:00\'
      page: 42 # Change Rooms
      clear-cache: 42
      values: 
        p42_slot: '20:00'

    warn-on-unsaved-changes: Do Not Check

  security: 
    authorization-scheme: Tournament Admin # 55893512303411682019

dynamic-actions: 
- # ====== Dynamic Action: Init Actions ========================
  id: 4007924469738096
  identification: 
    name: Init Actions

  execution: 
    sequence: 20

  when: 
    event: EVENT.EVENT.BROWSER.READY

  execution: 
    event-scope: Static

  actions: 
  - # ====== Action: Highlight Player ============================
    id: 4008038280738097
    identification: 
      name: Highlight Player
      action: Execute JavaScript Code

    settings: 
      code: $(".player").parents("tr").addClass("mark")

    execution: 
      sequence: 20
      event: Init Actions # 4007924469738096
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Add TZ Legend ===============================
    id: 4913928598479593
    identification: 
      name: Add TZ Legend
      action: Execute JavaScript Code

    settings: 
      code: |
        var out = apex.util.htmlBuilder();
        
        out.markup( "<span" )
            .attr( "class", "tzClass hidden-xs-up" )
            .markup( ">" )
            .content( tz )
            .markup( "</span>" );
        
        
        $(".room").each(
          function(i){
            // console.log(i, s[i]);
            $(this).prepend('<div class="u-tC">' + s[i] + out.toString() + '</div>');
            var $t = $(this).find('.t-Region-title');
            var t = $t.text();
            //    console.log({t});
            $t.text(t + " UTC");
          }
        );

    execution: 
      sequence: 10
      event: Init Actions # 4007924469738096
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Submit on Change ====================
  id: 29407138909118111
  identification: 
    name: Submit on Change

  execution: 
    sequence: 30

  when: 
    event: EVENT.EVENT.BROWSER.CHANGE
    selection-type: Item(s)
    item(s): 
    - P40_SHOW_AVATARS_IND

  execution: 
    event-scope: Static
    type: Immediate

  actions: 
  - # ====== Action: Submit Page =================================
    id: 29407276037118112
    identification: 
      action: Submit Page

    settings: 
      show-processing: true

    execution: 
      sequence: 10
      event: Submit on Change # 29407138909118111
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Submit Room Assignments =============
  id: 40380891077778957228
  identification: 
    name: Submit Room Assignments

  execution: 
    sequence: 10

  when: 
    event: EVENT.EVENT.BROWSER.CLICK
    selection-type: Button
    button: ASSIGN_ROOM # 24442383289129124348

  execution: 
    event-scope: Static
    type: Immediate

  actions: 
  - # ====== Action: Confirm =====================================
    id: 40380891114372957229
    identification: 
      action: Confirm

    settings: 
      title: Room Assignments
      message: Are you sure you want to run the room assignments?
      style: Information
      icon: fa-question
      confirm-label: Yes, Assign Rooms
      cancel-label: Not yet

    execution: 
      sequence: 10
      event: Submit Room Assignments # 40380891077778957228
      fire-when-event-result-is: True
      fire-on-initialization: false

    server-side-condition: 
      type: No Rows returned
      sql-query: "select 1 from wmg_tournament_sessions where id = :G_CURRENT_SESSION_ID and rooms_defined_flag = 'Y'"

  - # ====== Action: Submit Page =================================
    id: 40380891252669957230
    identification: 
      action: Submit Page

    settings: 
      request-/-button-name: ASSIGN_ROOM
      show-processing: true

    execution: 
      sequence: 30
      event: Submit Room Assignments # 40380891077778957228
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Confirm =====================================
    id: 40380891342828957231
    identification: 
      action: Confirm

    settings: 
      title: Redo Room Assignments
      message: |
        Rooms are already assigned.<br>
        Are you absolutely sure you want to re-assign the rooms?
      style: Danger
      icon: fa-danger
      confirm-label: Yes, Re-Assign Rooms
      cancel-label: Nope

    execution: 
      sequence: 20
      event: Submit Room Assignments # 40380891077778957228
      fire-when-event-result-is: True
      fire-on-initialization: false

    server-side-condition: 
      type: Rows returned
      sql-query: "select 1 from wmg_tournament_sessions where id = :G_CURRENT_SESSION_ID and rooms_defined_flag = 'Y'"

computations: 
- # ====== Computation: P40_TD_FLAG ============================
  id: 3820380057911615
  identification: 
    item-name: P40_TD_FLAG

  execution: 
    sequence: 30
    point: After Header

  computation: 
    type: Function Body
    language: PL/SQL
    pl/sql-function-body: |
      if apex_authorization.is_authorized('Administration Rights')
      or apex_authorization.is_authorized('Tournament Admin') then
        return 'Y';
      else
        return '';
      end if;

- # ====== Computation: P40_TZ =================================
  id: 13608175007876101
  identification: 
    item-name: P40_TZ

  execution: 
    sequence: 10
    point: Before Regions

  computation: 
    type: SQL Query (return single value)
    sql-query: 'select nvl(prefered_tz, sessiontimezone) from wmg_players where discord_id = :G_DISCORD_ID'

  server-side-condition: 
    type: Item is NOT NULL
    item: G_DISCORD_ID

  comments: 
    comments: The the prefered timezone for the user

- # ====== Computation: P40_TZ =================================
  id: 13608237373876102
  identification: 
    item-name: P40_TZ

  execution: 
    sequence: 20
    point: Before Regions

  computation: 
    type: Expression
    language: PL/SQL
    pl/sql-expression: sessiontimezone

  server-side-condition: 
    type: Item is NULL
    item: G_DISCORD_ID

- # ====== Computation: G_REGISTRATION_ID ======================
  id: 24442383444393124350
  identification: 
    item-name: G_REGISTRATION_ID

  execution: 
    sequence: 20
    point: After Header

  computation: 
    type: Static Value
    static-value: 507

  server-side-condition: 
    type: Never

  comments: 
    comments: This is an override during development

- # ====== Computation: G_CURRENT_SESSION_ID ===================
  id: 40380888782351957205
  identification: 
    item-name: G_CURRENT_SESSION_ID

  execution: 
    sequence: 10
    point: After Header

  computation: 
    type: Static Value
    static-value: 442

  server-side-condition: 
    type: Never

  comments: 
    comments: This is an override during development

processes: 
- # ====== Process: Open Rooms =================================
  id: 3819087288911602
  identification: 
    name: Open Rooms
    type: Execute Code

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      update wmg_tournament_sessions
         set rooms_open_flag = decode(rooms_open_flag, 'Y', null, 'Y')
           , registration_closed_flag = decode(registration_closed_flag, 'Y', null, 'Y')
      where id = :G_CURRENT_SESSION_ID;

  execution: 
    sequence: 20
    point: Processing
    run-process: Once Per Page Visit (default)

  success-message: 
    success-message: Rooms are now open!

  error: 
    display-location: Inline in Notification

  server-side-condition: 
    when-button-pressed: OPEN_ROOMS # 3819029434911601

  security: 
    authorization-scheme: Tournament Admin # 55893512303411682019

- # ====== Process: Run Room Assignments =======================
  id: 40817362645960412001
  identification: 
    name: Run Room Assignments
    type: Execute Code

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: 'wmg_util.assign_rooms(:G_CURRENT_SESSION_ID);'

  execution: 
    sequence: 10
    point: Processing
    run-process: Once Per Page Visit (default)

  success-message: 
    success-message: Rooms have been assigned, don't forget to open up the rooms!

  error: 
    display-location: Inline in Notification

  server-side-condition: 
    when-button-pressed: ASSIGN_ROOM # 24442383289129124348

  security: 
    authorization-scheme: Tournament Admin # 55893512303411682019

