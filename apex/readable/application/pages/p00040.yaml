---
# ====== Page: Room Selections & Assignments =================
id: 40
identification: 
  name: Room Selections & Assignments
  alias: ROOMS
  title: Room Selections & Assignments

appearance: 
  page-mode: Normal
  page-template: Theme Default
  template-options: 
  - '#DEFAULT#'
  - t-NavTabs--inlineLabels-lg
  - t-NavTabs--displayLabels-sm

navigation-menu: 
  override-user-interface-level: true
  list: Tournament Options # 55893111130016225986
  list-position: Top
  list-template: Top Navigation Tabs # 46995168148239514396
  template-options: 
  - '#DEFAULT#'
  - t-NavTabs--inlineLabels-lg
  - t-NavTabs--displayLabels-sm

navigation: 
  cursor-focus: Do not focus cursor
  warn-on-unsaved-changes: false

javascript: 
  function-and-global-variable-declaration: |
    function roomsReady() {
      
      var $popUp = $("#pendingWarning")
        , popUpStatus = $popUp.parents(".ui-dialog--popup").css("display");
    
    
      if (popUpStatus == "none") {
        // the pending Rooms warning is not open
        return;
      } 
      else {
        // Checking pending Rooms status
        apex.server.process('ROOMS_READY',
        {
           x01: &G_CURRENT_SESSION_ID.
        }
        , {
          success: function(pData) {
            if (pData.ready) {
              apex.submit(); // simply reload
            }
            else {
              // check all over again
              setTimeout(roomsReady, 5500);
            }
          }
    
        }
        );
      }
    }
    
    
  execute-when-page-loads: wmgt.theme.init();

css: 
  inline: |
    .room h2 {font-weight: bold;}
    mark.player {display: block;}
    td#ROOM_NO {
      border-bottom: 1px solid;
      font-size: 1.7em;
      font-weight: 800;
      padding: 5px 0 3px 0px;
    }
    .t-Report-colHead {display: none;}
    
    #timeLegend {outline: 1px solid red;}
    #timeLegend table { width: 100%;}
    .tzClass {padding-left: .4rem;}
    
    .-wm-discord-link {
        margin-right: 1em;
    }
    td[headers^="PLAYERS"] .--wm-np:before  {
      position: relative;
      right: 0;
      top: -6px;
    }
    td[headers^="PLAYERS"] a + .--wm-np:before  {
      top: 6px;
    }
    

security: 
  authentication: Page Is Public

advanced: 
  enable-meta-tags: false

security: 
  deep-linking: Application Default
  page-access-protection: Unrestricted
  form-auto-complete: Off
  browser-cache: Application Default

session-management: 
  rejoin-sessions: Application Default

advanced: 
  enable-duplicate-page-submissions: Yes - Enable page to be re-posted
  reload-on-submit: Only for Success

server-cache: 
  caching: Disabled

help: 
  help-text: |
    The private room names will be/are <i>WMGT1</i>, <i>WMGT2</i>, etc... Rooms will be available 30 min before the 1st group is due to play.<br>
    Find your room and join a few minutes before so you can start your round precisely on time.<br>
    <br>
    ðŸš¨ <b>VERY IMPORTANT</b> ðŸš¨ <br>
    <ol>
        <li>Play the Easy Course round first</li>
        <li>Take picture</li>
        <li>Play the Hard Course round last</li>
        <li>Submit your scores back here <a href="#0" onclick="apex.util.getTopApex().jQuery('#ENTER_ROUNDS').click()">3. Enter Scores</a> <i>(Posting of pictures is NOT submission of scores)</i></li>
        <li><b>One</b> person in the room must post pictures in the <a href="https://discord.com/channels/752022800562389015/763534404285890560" target="_blank">#tournament-chat</a> channel</li>
    </ol>
    <br>
    Don't forget to go to <a href="https://discord.com/channels/752022800562389015/763542150877020190" target="_blank">#tournament-info</a> and find the link to submit your scores after you finish your rounds!<br>
    <br>
    <b>Make sure the timestamp is visible in your pictures</b>
    (by clicking the 3 dots in the bottom right hand corner)<br>
    <br>
    AND<br>
    <br>
    If you're the first person in the room <b>DO NOT CLICK MAIN MENU</b> <b>until</b> you have <b>asked</b> if someone has taken a picture after the rounds.
    

regions: 
- # ====== Region: About the rooms =============================
  id: 12341661862723547
  identification: 
    title: About the rooms
    type: Static Content

  source: 
    html-code: |
      The private room names will be/are <i>WMGT1</i>, <i>WMGT2</i>, etc... Rooms will be available 30 min before the 1st group is due to play.<br>
      Find your room and join a few minutes before so you can start your round precisely on time.<br>
      <br>
      ðŸš¨ <b>VERY IMPORTANT</b> ðŸš¨ <br>
      <ol>
          <li>Play the Easy Course round first</li>
          <li>Take picture</li>
          <li>Play the Hard Course round last</li>
          <li>Submit your scores back here <a href="#0" onclick="$('#ENTER_ROUNDS').click()">3. Enter Scores</a> <i>(Posting of pictures is NOT submission of scores)</i></li>
          <li><b>One</b> person in the room must post pictures in the <a href="https://discord.com/channels/752022800562389015/763534404285890560" target="_blank">#tournament-chat</a> channel</li>
      </ol>
      <br>
      Don't forget to go to <a href="https://discord.com/channels/752022800562389015/763542150877020190" target="_blank">#tournament-info</a> and find the link to submit your scores after you finish your rounds!<br>
      <br>
      <b>Make sure the timestamp is visible in your pictures</b>
      (by clicking the 3 dots in the bottom right hand corner)<br>
      <br>
      AND<br>
      <br>
      If you're the first person in the room <b>DO NOT CLICK MAIN MENU</b> <b>until</b> you have <b>asked</b> if someone has taken a picture after the rounds.
      

  layout: 
    sequence: 99
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Content Block # 46995069112127514354
    template-options: 
    - '#DEFAULT#'
    - t-ContentBlock--h2
    - t-ContentBlock--headingFontAlt
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: {slots.js} ==================================
  id: 13434556285291519
  identification: 
    title: '{slots.js}'
    type: Dynamic Content

  source: 
    language: PL/SQL
    pl/sql-function-body-returning-a-clob: |
      declare 
        t varchar2(4000);
        tz varchar2(100);
      begin
      
      with tz as (
      select :P40_TZ tz from dual 
      )
      , slots_n as (
          select level n
           from dual
           connect by level <= 6
          )
      , slots as (
          select slot || ':00' d, slot t
          from (
              select lpad( (n-1)*4,2,0) slot
              from slots_n
          )
      )
      , ts as (
          select s.session_date
          from wmg_tournament_sessions s
          where s.tournament_id in (
              select id
                from wmg_tournaments
               where current_flag = 'Y'
          )
            and s.completed_ind = 'N'
          order by s.session_date
          fetch first 1 rows only
      )
      select json_arrayagg(
             to_char(local_tz, 'fmDy, fmMonth fmDD') 
            || ' ' 
            || case when tz like 'US/%' or tz like 'America%' then
                 ltrim(to_char(local_tz, 'HH:MI PM'), '0')
               else 
                 to_char(local_tz, 'HH24:MI')
               end
              )
              , tz
         into t, tz
        from (
          select s.session_date
               , slots.d
               , tz.tz
               , to_utc_timestamp_tz(to_char(s.session_date, 'yyyy-mm-dd') || 'T' || slots.d) at time zone tz.tz local_tz
          from ts s
             , tz
             , slots
         );
      
      return '<script>var s = ' || nvl(t, '["","","","","",""]') || ', tz = "' || tz || '";</script>';
      exception
      when others then
      return '<script>var s = ["","","","","",""], tz = "UTC";</script>';
      end;
      

  layout: 
    sequence: 119
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Blank with Attributes # 46995040627542514343
    template-options: 
    - '#DEFAULT#'
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  comments: 
    comments: generate a JS variable with the converted times so they can be added to each time slot.

  attributes: 
    performance: 
      lazy-loading: false

- # ====== Region: Randomizing rooms... ========================
  id: 39135046539390001
  identification: 
    title: Randomizing rooms...
    type: Static Content

  source: 
    html-code: |
      <h3>Randomizing and shuffling rooms...</h3>
      
      The page will re-load when ready or return in a few minutes. <br>
      
      Just a few moments...<br>
      
      <br>
      <div class="u-tC">
      <span aria-hidden="true" class="fa fa-spinner fa-4x fa-anim-spin-step"></span>
      </div>

  layout: 
    sequence: 129
    parent-region: No Parent
    position: REGION_POSITION_04
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Inline Popup # 46995091106884514363
    template-options: 
    - '#DEFAULT#'
    - js-dialog-autoheight
    - js-dialog-size480x320
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    static-id: pendingWarning
    region-display-selector: false
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: 00:00 =======================================
  id: 7057232864153582635
  identification: 
    title: '00:00'
    type: Classic Report

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      select case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then nvl2(p.room_no, 'WMGT', '') || p.room_no else '' end room_no
           , case when p.player_id = :G_PLAYER_ID then
              '<mark class="player">'
             end
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then
              case when :P40_TD_FLAG = 'Y' and :P40_SHOW_AVATARS_IND = 'Y' then wmg_discord.avatar_link(p_discord_id => p.discord_id) end ||
              ' <a href="' ||
                apex_page.get_url(
                    p_page => 30
                  , p_items => 'P30_PLAYER_ID,P30_PAGE_ID_PREV'
                  , p_values => p.player_id || ',' || :APP_PAGE_ID
                ) || '">' 
             end
          || apex_escape.html(p.player_name)
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then '</a>' end
          || case when p.player_id = :G_PLAYER_ID then
              '</mark>'
             end
          || case when p.player_id >= :P40_NEW_PLAYER_ID then '<span class="fa --wm-np tooltip" title="New Player!"></span>' end players
      from wmg_tournament_player_v p
         , wmg_tournament_sessions s
      where s.id =  p.tournament_session_id
        and p.time_slot = '00:00'
        and p.active_ind = 'Y'
        and p.tournament_session_id = :G_CURRENT_SESSION_ID
      order by case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then
                 p.room_no 
               else 0 end, p.tournament_player_id
      

  layout: 
    sequence: 29
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    column-css-classes: 
    - room
    - col-xxs-12
    - col-xs-12
    - col-sm-4
    - col-md-4

  appearance: 
    template: Standard # 46995101107768514367
    template-options: 
    - '#DEFAULT#'
    - t-Region--accent1
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: true
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    layout: 
      number-of-rows-type: Static Value
      number-of-rows: 200

    appearance: 
      template-type: Theme
      template: Standard # 46995138939704514382
      template-options: 
      - '#DEFAULT#'
      - t-Report--stretch
      - t-Report--staticRowColors
      - t-Report--rowHighlightOff
      - t-Report--noBorders
      - t-Report--hideNoPagination

    pagination: 
      type: No Pagination (Show All Rows)
      partial-page-refresh: true

    performance: 
      lazy-loading: false

    break-formatting: 
      break-columns: First Column
      style: Repeat Headings on Break
      before-row: <hr>
      column-break-format: 'WMGT #ROOM_NO#'

    advanced: 
      strip-html: false
      sort-nulls: Last

    heading: 
      type: None

    download: 
      csv-export-enabled: false

    printing: 
      enabled: false

  columns: 
  - # ====== Column: PLAYERS =====================================
    id: 7057232992564582636
    identification: 
      column-name: PLAYERS
      type: Plain Text

    heading: 
      heading: Players
      alignment: center

    layout: 
      sequence: 20
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: false

  - # ====== Column: ROOM_NO =====================================
    id: 40389409782496769135
    identification: 
      column-name: ROOM_NO
      type: Plain Text

    heading: 
      heading: Room
      alignment: center

    layout: 
      sequence: 10
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

- # ====== Region: 04:00 =======================================
  id: 7057233087460582637
  identification: 
    title: '04:00'
    type: Classic Report

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      select case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then nvl2(p.room_no, 'WMGT', '') || p.room_no else '' end room_no
           , case when p.player_id = :G_PLAYER_ID then
              '<mark class="player">'
             end
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then
              case when :P40_TD_FLAG = 'Y' and :P40_SHOW_AVATARS_IND = 'Y' then wmg_discord.avatar_link(p_discord_id => p.discord_id) end ||
              ' <a href="' ||
                apex_page.get_url(
                    p_page => 30
                  , p_items => 'P30_PLAYER_ID,P30_PAGE_ID_PREV'
                  , p_values => p.player_id || ',' || :APP_PAGE_ID
                ) || '">' 
             end
          || apex_escape.html(p.player_name)
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then '</a>' end
          || case when p.player_id = :G_PLAYER_ID then
              '</mark>'
             end
          || case when p.player_id >= :P40_NEW_PLAYER_ID then '<span class="fa --wm-np tooltip" title="New Player!"></span>' end players
      from wmg_tournament_player_v p
         , wmg_tournament_sessions s
      where s.id =  p.tournament_session_id
        and p.time_slot = '04:00'
        and p.active_ind = 'Y'
        and p.tournament_session_id = :G_CURRENT_SESSION_ID
      order by case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then
                 p.room_no 
               else 0 end, p.tournament_player_id
      

  layout: 
    sequence: 39
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    column-css-classes: 
    - room
    - col-xxs-12
    - col-xs-12
    - col-sm-4
    - col-md-4

  appearance: 
    template: Standard # 46995101107768514367
    template-options: 
    - '#DEFAULT#'
    - t-Region--accent2
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: true
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    layout: 
      number-of-rows-type: Static Value
      number-of-rows: 200

    appearance: 
      template-type: Theme
      template: Standard # 46995138939704514382
      template-options: 
      - '#DEFAULT#'
      - t-Report--stretch
      - t-Report--staticRowColors
      - t-Report--rowHighlightOff
      - t-Report--noBorders
      - t-Report--hideNoPagination

    pagination: 
      type: No Pagination (Show All Rows)
      partial-page-refresh: true

    performance: 
      lazy-loading: false

    break-formatting: 
      break-columns: First Column
      style: Repeat Headings on Break

    advanced: 
      strip-html: false
      sort-nulls: Last

    heading: 
      type: None

    download: 
      csv-export-enabled: false

    printing: 
      enabled: false

  columns: 
  - # ====== Column: PLAYERS =====================================
    id: 7057233141776582638
    identification: 
      column-name: PLAYERS
      type: Plain Text

    heading: 
      heading: Players
      alignment: center

    layout: 
      sequence: 20
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: false

  - # ====== Column: ROOM_NO =====================================
    id: 40389409885948769136
    identification: 
      column-name: ROOM_NO
      type: Plain Text

    heading: 
      heading: Room No
      alignment: center

    layout: 
      sequence: 10
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

- # ====== Region: 08:00 =======================================
  id: 7057233226275582639
  identification: 
    title: '08:00'
    type: Classic Report

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      select case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then nvl2(p.room_no, 'WMGT', '') || p.room_no else '' end room_no
           , case when p.player_id = :G_PLAYER_ID then
              '<mark class="player">'
             end
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then
              case when :P40_TD_FLAG = 'Y' and :P40_SHOW_AVATARS_IND = 'Y' then wmg_discord.avatar_link(p_discord_id => p.discord_id) end ||
              ' <a href="' ||
                apex_page.get_url(
                    p_page => 30
                  , p_items => 'P30_PLAYER_ID,P30_PAGE_ID_PREV'
                  , p_values => p.player_id || ',' || :APP_PAGE_ID
                ) || '">' 
             end
          || apex_escape.html(p.player_name)
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then '</a>' end
          || case when p.player_id = :G_PLAYER_ID then
              '</mark>'
             end
          || case when p.player_id >= :P40_NEW_PLAYER_ID then '<span class="fa --wm-np tooltip" title="New Player!"></span>' end players
      from wmg_tournament_player_v p
         , wmg_tournament_sessions s
      where s.id =  p.tournament_session_id
        and p.time_slot = '08:00'
        and p.active_ind = 'Y'
        and p.tournament_session_id = :G_CURRENT_SESSION_ID
      order by case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then
                 p.room_no 
               else 0 end, p.tournament_player_id
      

  layout: 
    sequence: 49
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    column-css-classes: 
    - room
    - col-xxs-12
    - col-xs-12
    - col-sm-4
    - col-md-4

  appearance: 
    template: Standard # 46995101107768514367
    template-options: 
    - '#DEFAULT#'
    - t-Region--accent3
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: true
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    layout: 
      number-of-rows-type: Static Value
      number-of-rows: 200

    appearance: 
      template-type: Theme
      template: Standard # 46995138939704514382
      template-options: 
      - '#DEFAULT#'
      - t-Report--stretch
      - t-Report--staticRowColors
      - t-Report--rowHighlightOff
      - t-Report--noBorders
      - t-Report--hideNoPagination

    pagination: 
      type: No Pagination (Show All Rows)
      partial-page-refresh: true

    performance: 
      lazy-loading: false

    break-formatting: 
      break-columns: First Column
      style: Repeat Headings on Break

    advanced: 
      strip-html: false
      sort-nulls: Last

    heading: 
      type: None

    download: 
      csv-export-enabled: false

    printing: 
      enabled: false

  columns: 
  - # ====== Column: PLAYERS =====================================
    id: 7057233390403582640
    identification: 
      column-name: PLAYERS
      type: Plain Text

    heading: 
      heading: Players
      alignment: center

    layout: 
      sequence: 20
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: false

  - # ====== Column: ROOM_NO =====================================
    id: 40389409966132769137
    identification: 
      column-name: ROOM_NO
      type: Plain Text

    heading: 
      heading: Room No
      alignment: center

    layout: 
      sequence: 10
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

- # ====== Region: 12:00 =======================================
  id: 7057233465800582641
  identification: 
    title: '12:00'
    type: Classic Report

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      select case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then nvl2(p.room_no, 'WMGT', '') || p.room_no else '' end room_no
           , case when p.player_id = :G_PLAYER_ID then
              '<mark class="player">'
             end
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then
              case when :P40_TD_FLAG = 'Y' and :P40_SHOW_AVATARS_IND = 'Y' then wmg_discord.avatar_link(p_discord_id => p.discord_id) end ||
              ' <a href="' ||
                apex_page.get_url(
                    p_page => 30
                  , p_items => 'P30_PLAYER_ID,P30_PAGE_ID_PREV'
                  , p_values => p.player_id || ',' || :APP_PAGE_ID
                ) || '">' 
             end
          || apex_escape.html(p.player_name)
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then '</a>' end
          || case when p.player_id = :G_PLAYER_ID then
              '</mark>'
             end
          || case when p.player_id >= :P40_NEW_PLAYER_ID then '<span class="fa --wm-np tooltip" title="New Player!"></span>' end players
      from wmg_tournament_player_v p
         , wmg_tournament_sessions s
      where s.id =  p.tournament_session_id
        and p.time_slot = '12:00'
        and p.active_ind = 'Y'
        and p.tournament_session_id = :G_CURRENT_SESSION_ID
      order by case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then
                 p.room_no 
               else 0 end, p.tournament_player_id
      

  layout: 
    sequence: 59
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    column-css-classes: 
    - room
    - col-xxs-12
    - col-xs-12
    - col-sm-4
    - col-md-4

  appearance: 
    template: Standard # 46995101107768514367
    template-options: 
    - '#DEFAULT#'
    - t-Region--accent4
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: true
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    layout: 
      number-of-rows-type: Static Value
      number-of-rows: 200

    appearance: 
      template-type: Theme
      template: Standard # 46995138939704514382
      template-options: 
      - '#DEFAULT#'
      - t-Report--stretch
      - t-Report--staticRowColors
      - t-Report--rowHighlightOff
      - t-Report--noBorders
      - t-Report--hideNoPagination

    pagination: 
      type: No Pagination (Show All Rows)
      partial-page-refresh: true

    performance: 
      lazy-loading: false

    break-formatting: 
      break-columns: First Column
      style: Repeat Headings on Break

    advanced: 
      strip-html: false
      sort-nulls: Last

    heading: 
      type: None

    download: 
      csv-export-enabled: false

    printing: 
      enabled: false

  columns: 
  - # ====== Column: PLAYERS =====================================
    id: 7057233549865582642
    identification: 
      column-name: PLAYERS
      type: Plain Text

    heading: 
      heading: Players
      alignment: center

    layout: 
      sequence: 20
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: false

  - # ====== Column: ROOM_NO =====================================
    id: 40389410077500769138
    identification: 
      column-name: ROOM_NO
      type: Plain Text

    heading: 
      heading: Room No
      alignment: center

    layout: 
      sequence: 10
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

- # ====== Region: 16:00 =======================================
  id: 7057233707839582643
  identification: 
    title: '16:00'
    type: Classic Report

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      select case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then nvl2(p.room_no, 'WMGT', '') || p.room_no else '' end room_no
           , case when p.player_id = :G_PLAYER_ID then
              '<mark class="player">'
             end
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then
              case when :P40_TD_FLAG = 'Y' and :P40_SHOW_AVATARS_IND = 'Y' then wmg_discord.avatar_link(p_discord_id => p.discord_id) end ||
              ' <a href="' ||
                apex_page.get_url(
                    p_page => 30
                  , p_items => 'P30_PLAYER_ID,P30_PAGE_ID_PREV'
                  , p_values => p.player_id || ',' || :APP_PAGE_ID
                ) || '">' 
             end
          || apex_escape.html(p.player_name)
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then '</a>' end
          || case when p.player_id = :G_PLAYER_ID then
              '</mark>'
             end
          || case when p.player_id >= :P40_NEW_PLAYER_ID then '<span class="fa --wm-np tooltip" title="New Player!"></span>' end players
      from wmg_tournament_player_v p
         , wmg_tournament_sessions s
      where s.id =  p.tournament_session_id
        and p.time_slot = '16:00'
        and p.active_ind = 'Y'
        and p.tournament_session_id = :G_CURRENT_SESSION_ID
      order by case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then
                 p.room_no 
               else 0 end, p.tournament_player_id
      

  layout: 
    sequence: 69
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    column-css-classes: 
    - room
    - col-xxs-12
    - col-xs-12
    - col-sm-4
    - col-md-4

  appearance: 
    template: Standard # 46995101107768514367
    template-options: 
    - '#DEFAULT#'
    - t-Region--accent5
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: true
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    layout: 
      number-of-rows-type: Static Value
      number-of-rows: 200

    appearance: 
      template-type: Theme
      template: Standard # 46995138939704514382
      template-options: 
      - '#DEFAULT#'
      - t-Report--stretch
      - t-Report--staticRowColors
      - t-Report--rowHighlightOff
      - t-Report--noBorders
      - t-Report--hideNoPagination

    pagination: 
      type: No Pagination (Show All Rows)
      partial-page-refresh: true

    performance: 
      lazy-loading: false

    break-formatting: 
      break-columns: First Column
      style: Repeat Headings on Break

    advanced: 
      strip-html: false
      sort-nulls: Last

    heading: 
      type: None

    download: 
      csv-export-enabled: false

    printing: 
      enabled: false

  columns: 
  - # ====== Column: PLAYERS =====================================
    id: 7057233764234582644
    identification: 
      column-name: PLAYERS
      type: Plain Text

    heading: 
      heading: Players
      alignment: center

    layout: 
      sequence: 20
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: false

  - # ====== Column: ROOM_NO =====================================
    id: 40389410159605769139
    identification: 
      column-name: ROOM_NO
      type: Plain Text

    heading: 
      heading: Room No
      alignment: center

    layout: 
      sequence: 10
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

- # ====== Region: 20:00 =======================================
  id: 7057233824244582645
  identification: 
    title: '20:00'
    type: Classic Report

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      select case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then nvl2(p.room_no, 'WMGT', '') || p.room_no else '' end room_no
           , case when p.player_id = :G_PLAYER_ID then
              '<mark class="player">'
             end
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then
              case when :P40_TD_FLAG = 'Y' and :P40_SHOW_AVATARS_IND = 'Y' then wmg_discord.avatar_link(p_discord_id => p.discord_id) end ||
              ' <a href="' ||
                apex_page.get_url(
                    p_page => 30
                  , p_items => 'P30_PLAYER_ID,P30_PAGE_ID_PREV'
                  , p_values => p.player_id || ',' || :APP_PAGE_ID
                ) || '">' 
             end
          || apex_escape.html(p.player_name)
          || case when (s.rooms_defined_flag is null and p.player_id = :G_PLAYER_ID) or :P40_TD_FLAG = 'Y' then '</a>' end
          || case when p.player_id = :G_PLAYER_ID then
              '</mark>'
             end
          || case when p.player_id >= :P40_NEW_PLAYER_ID then '<span class="fa --wm-np tooltip" title="New Player!"></span>' end players
      from wmg_tournament_player_v p
         , wmg_tournament_sessions s
      where s.id =  p.tournament_session_id
        and p.time_slot = '20:00'
        and p.active_ind = 'Y'
        and p.tournament_session_id = :G_CURRENT_SESSION_ID
      order by case when s.rooms_open_flag = 'Y' or :P40_TD_FLAG = 'Y' then
                 p.room_no 
               else 0 end, p.tournament_player_id
      

  layout: 
    sequence: 79
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: Automatic
    column-css-classes: 
    - room
    - col-xxs-12
    - col-xs-12
    - col-sm-4
    - col-md-4

  appearance: 
    template: Standard # 46995101107768514367
    template-options: 
    - '#DEFAULT#'
    - t-Region--accent6
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: true
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    layout: 
      number-of-rows-type: Static Value
      number-of-rows: 200

    appearance: 
      template-type: Theme
      template: Standard # 46995138939704514382
      template-options: 
      - '#DEFAULT#'
      - t-Report--stretch
      - t-Report--staticRowColors
      - t-Report--rowHighlightOff
      - t-Report--noBorders
      - t-Report--hideNoPagination

    pagination: 
      type: No Pagination (Show All Rows)
      partial-page-refresh: true

    performance: 
      lazy-loading: false

    break-formatting: 
      break-columns: First Column
      style: Repeat Headings on Break

    advanced: 
      strip-html: false
      sort-nulls: Last

    heading: 
      type: None

    download: 
      csv-export-enabled: false

    printing: 
      enabled: false

  columns: 
  - # ====== Column: PLAYERS =====================================
    id: 7057233974190582646
    identification: 
      column-name: PLAYERS
      type: Plain Text

    heading: 
      heading: Players
      alignment: center

    layout: 
      sequence: 20
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: false

  - # ====== Column: ROOM_NO =====================================
    id: 40389410250639769140
    identification: 
      column-name: ROOM_NO
      type: Plain Text

    heading: 
      heading: Room No
      alignment: center

    layout: 
      sequence: 10
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

- # ====== Region: {legend} ====================================
  id: 24450904108057936276
  identification: 
    title: '{legend}'
    type: Classic Report

  source: 
    location: Local Database
    type: SQL Query
    sql-query: "select 'The 00:00, 04:00, 08:00, 12:00, 16:00, 20:00 times are in UTC. The times above the time slots are in ' || :P40_TZ legend from dual "

  layout: 
    sequence: 6
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Blank with Attributes # 46995040627542514343
    template-options: 
    - '#DEFAULT#'
    - margin-bottom-md
    - margin-left-none
    - margin-right-none
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    static-id: timeLegend
    region-display-selector: false
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    layout: 
      number-of-rows-type: Static Value
      number-of-rows: 15

    appearance: 
      template-type: Predefined
      template: HTML (standard)

    pagination: 
      type: No Pagination (Show All Rows)
      partial-page-refresh: false

    break-formatting: 
      break-columns: No Break

    advanced: 
      strip-html: false
      sort-nulls: Last

    heading: 
      type: None

    download: 
      csv-export-enabled: false

    printing: 
      enabled: false

  columns: 
  - # ====== Column: LEGEND ======================================
    id: 13434993353291523
    identification: 
      column-name: LEGEND
      type: Plain Text

    heading: 
      heading: Legend
      alignment: center

    layout: 
      sequence: 10
      column-alignment: center

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: true

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

- # ====== Region: {Regions} ===================================
  id: 40389410332940769141
  identification: 
    title: '{Regions}'
    type: Region Display Selector

  layout: 
    sequence: 10
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: true
    row-css-classes: 
    - hidden-md-up
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard # 46995101107768514367
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--removeHeader js-removeLandmark
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    static-id: regionRDS
    region-display-selector: false
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      mode: Scroll Window
      remember-last-selection: false

- # ====== Region: Next Tournament =============================
  id: 65130795393207479100
  identification: 
    title: Next Tournament
    type: Classic Report

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      select s.session_date
           , s.easy_course_code, nvl(ec.name, 'TBD -') easy_course
           , s.hard_course_code, nvl(hc.name, 'TBD -') hard_course
           , (select count(*) from wmg_tournament_players p where p.tournament_session_id = s.tournament_session_id and p.active_ind = 'Y') players
      from wmg_tournament_sessions_v s
         , wmg_courses ec
         , wmg_courses hc
      where s.easy_course_id = ec.id (+)
        and s.hard_course_id = hc.id (+)
        and s.tournament_session_id = :G_CURRENT_SESSION_ID
      /*
        and s.tournament_id in (
          select id
            from wmg_tournaments
           where current_flag = 'Y'
      )
      and session_date+1 > sysdate
      */
      order by session_date
      fetch first 1 rows only

  layout: 
    sequence: 5
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: true
    column: 4
    new-column: true
    column-span: 6

  appearance: 
    template: Alert # 46995035459709514340
    template-options: 
    - '#DEFAULT#'
    - t-Alert--colorBG
    - t-Alert--horizontal
    - t-Alert--noIcon
    - t-Alert--info
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    layout: 
      number-of-rows-type: Static Value
      number-of-rows: 15

    appearance: 
      template-type: Theme
      template: Standard # 46995138939704514382
      template-options: 
      - '#DEFAULT#'
      - t-Report--staticRowColors
      - t-Report--rowHighlightOff
      - t-Report--noBorders

    pagination: 
      type: No Pagination (Show All Rows)
      partial-page-refresh: true

    performance: 
      lazy-loading: false

    break-formatting: 
      break-columns: No Break

    advanced: 
      strip-html: false
      sort-nulls: Last

    heading: 
      type: None

    download: 
      csv-export-enabled: false

    printing: 
      enabled: false

  columns: 
  - # ====== Column: PLAYERS =====================================
    id: 40395056496679895466
    identification: 
      column-name: PLAYERS
      type: Hidden Column

    layout: 
      sequence: 30

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: EASY_COURSE_CODE ============================
    id: 40395056723824895467
    identification: 
      column-name: EASY_COURSE_CODE
      type: Hidden Column

    layout: 
      sequence: 40

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: HARD_COURSE_CODE ============================
    id: 40395057219458895467
    identification: 
      column-name: HARD_COURSE_CODE
      type: Hidden Column

    layout: 
      sequence: 50

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: EASY_COURSE =================================
    id: 40395057592299895467
    identification: 
      column-name: EASY_COURSE
      type: Hidden Column

    layout: 
      sequence: 60

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: HARD_COURSE =================================
    id: 40395057945361895468
    identification: 
      column-name: HARD_COURSE
      type: Hidden Column

    layout: 
      sequence: 70

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: SESSION_DATE ================================
    id: 40395058411956895468
    identification: 
      column-name: SESSION_DATE
      type: Plain Text

    heading: 
      heading: Session Date
      alignment: center

    layout: 
      sequence: 20
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    appearance: 
      format-mask: fmDay, fmMonth fmDD, YYYY

    column-formatting: 
      html-expression: |
        The next tournament is on #SESSION_DATE#. Registered Players: <b>#PLAYERS#</b><br>
        <br>
        The courses are:<br>
        â€¢ #EASY_COURSE_CODE# - #EASY_COURSE#<br>
        â€¢ #HARD_COURSE_CODE# - #HARD_COURSE#

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

page-items: 
- # ====== Page Item: P40_TD_FLAG ==============================
  id: 12341207273723543
  identification: 
    name: P40_TD_FLAG
    type: Hidden

  settings: 
    value-protected: true

  layout: 
    sequence: 10
    region: '00:00' # 7057232864153582635
    position: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

  comments: 
    comments: Set when a TD is viewing

- # ====== Page Item: P40_TZ ===================================
  id: 22128963976688029
  identification: 
    name: P40_TZ
    type: Hidden

  settings: 
    value-protected: true

  layout: 
    sequence: 20
    region: '00:00' # 7057232864153582635
    position: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P40_SHOW_AVATARS_IND =====================
  id: 37927902156930039
  identification: 
    name: P40_SHOW_AVATARS_IND
    type: Switch

  label: 
    label: <span aria-hidden="true" class="fa fa-user-man tooltip" title="Show Avatars?"></span>
    alignment: Left

  settings: 
    use-defaults: true

  layout: 
    sequence: 10
    region: Breadcrumb # 59007190296908349363
    position: NEXT
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating # 46995171503553514398
    template-options: 
    - '#DEFAULT#'

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Ignore

  source: 
    type: Null
    used: Only when current value in session state is null

  default: 
    type: Static
    static-value: N

  session-state: 
    storage: Per Session (Persistent)

  security: 
    authorization-scheme: Administration Rights # 46995203575692514425
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P40_NEW_PLAYER_ID ========================
  id: 39135795378390008
  identification: 
    name: P40_NEW_PLAYER_ID
    type: Hidden

  settings: 
    value-protected: true

  layout: 
    sequence: 30
    region: '00:00' # 7057232864153582635
    position: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

buttons: 
- # ====== Button: OPEN_ROOMS ==================================
  id: 12339952842723530
  identification: 
    button-name: OPEN_ROOMS
    label: Open Rooms

  layout: 
    sequence: 30
    region: Breadcrumb # 59007190296908349363
    position: NEXT
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Text with Icon # 46995174047152514400
    hot: false
    template-options: 
    - '#DEFAULT#'
    - t-Button--success
    - t-Button--iconLeft
    - t-Button--hoverIconPush
    icon: fa-unlock

  behavior: 
    action: Submit Page
    execute-validations: true
    warn-on-unsaved-changes: Do Not Check

  server-side-condition: 
    type: Rows returned
    sql-query: "select 1 from wmg_tournament_sessions where id = :G_CURRENT_SESSION_ID and rooms_defined_flag = 'Y' and rooms_open_flag is null"

  security: 
    authorization-scheme: Tournament Admin # 55902033226819493948

- # ====== Button: ENTER_ROUNDS ================================
  id: 32755679058549247
  identification: 
    button-name: ENTER_ROUNDS
    label: 3.Enter Rounds

  layout: 
    sequence: 10
    region: About the rooms # 12341661862723547
    position: BODY
    start-new-layout: false
    start-new-row: true
    row-css-classes: 
    - u-vh
    column: Automatic
    new-column: true
    column-span: Automatic
    alignment: Right

  appearance: 
    button-template: Text with Icon # 46995174047152514400
    hot: false
    template-options: 
    - '#DEFAULT#'
    - t-Button--iconLeft
    icon: fa-number-3

  behavior: 
    action: Redirect to Page in this Application
    target: 
      url: 'f?p=&APP_ID.:50:&SESSION.::&DEBUG.:50::'
      page: 50 # Enter Rounds
      clear-cache: 50

    warn-on-unsaved-changes: Do Not Check

  advanced: 
    static-id: ENTER_ROUNDS

- # ====== Button: ASSIGN_ROOM =================================
  id: 24450904212536936277
  identification: 
    button-name: ASSIGN_ROOM
    label: Assign Rooms...

  layout: 
    sequence: 20
    region: Breadcrumb # 59007190296908349363
    position: NEXT
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Text with Icon # 46995174047152514400
    hot: false
    template-options: 
    - '#DEFAULT#'
    - t-Button--iconLeft
    icon: fa-refresh

  behavior: 
    action: Defined by Dynamic Action
    execute-validations: true

  server-side-condition: 
    type: Rows returned
    sql-query: 'select 1 from wmg_tournament_sessions where id = :G_CURRENT_SESSION_ID and rooms_open_flag is null'

  security: 
    authorization-scheme: Tournament Admin # 55902033226819493948

- # ====== Button: EDIT_00 =====================================
  id: 40389410438139769142
  identification: 
    button-name: EDIT_00
    label: 'Edit 00:00'

  layout: 
    sequence: 10
    region: '00:00' # 7057232864153582635
    position: EDIT
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Icon # 46995173311788514399
    hot: false
    template-options: 
    - '#DEFAULT#'
    icon: fa-chevron-right

  behavior: 
    action: Redirect to Page in this Application
    target: 
      url: 'f?p=&APP_ID.:42:&SESSION.::&DEBUG.:42:P42_SLOT:\00:00\'
      page: 42 # Change Rooms
      clear-cache: 42
      values: 
        p42_slot: '00:00'

    warn-on-unsaved-changes: Do Not Check

  security: 
    authorization-scheme: Tournament Admin # 55902033226819493948

- # ====== Button: EDIT_04 =====================================
  id: 40389411448742769152
  identification: 
    button-name: EDIT_04
    label: 'Edit 04:00'

  layout: 
    sequence: 20
    region: '04:00' # 7057233087460582637
    position: EDIT
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Icon # 46995173311788514399
    hot: false
    template-options: 
    - '#DEFAULT#'
    icon: fa-chevron-right

  behavior: 
    action: Redirect to Page in this Application
    target: 
      url: 'f?p=&APP_ID.:42:&SESSION.::&DEBUG.:42:P42_SLOT:\04:00\'
      page: 42 # Change Rooms
      clear-cache: 42
      values: 
        p42_slot: '04:00'

    warn-on-unsaved-changes: Do Not Check

  security: 
    authorization-scheme: Tournament Admin # 55902033226819493948

- # ====== Button: EDIT_08 =====================================
  id: 40389411553192769153
  identification: 
    button-name: EDIT_08
    label: 'Edit 08:00'

  layout: 
    sequence: 10
    region: '08:00' # 7057233226275582639
    position: EDIT
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Icon # 46995173311788514399
    hot: false
    template-options: 
    - '#DEFAULT#'
    icon: fa-chevron-right

  behavior: 
    action: Redirect to Page in this Application
    target: 
      url: 'f?p=&APP_ID.:42:&SESSION.::&DEBUG.:42:P42_SLOT:\08:00\'
      page: 42 # Change Rooms
      clear-cache: 42
      values: 
        p42_slot: '08:00'

    warn-on-unsaved-changes: Do Not Check

  security: 
    authorization-scheme: Tournament Admin # 55902033226819493948

- # ====== Button: EDIT_12 =====================================
  id: 40389411686873769154
  identification: 
    button-name: EDIT_12
    label: 'Edit 12:00'

  layout: 
    sequence: 10
    region: '12:00' # 7057233465800582641
    position: EDIT
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Icon # 46995173311788514399
    hot: false
    template-options: 
    - '#DEFAULT#'
    icon: fa-chevron-right

  behavior: 
    action: Redirect to Page in this Application
    target: 
      url: 'f?p=&APP_ID.:42:&SESSION.::&DEBUG.:42:P42_SLOT:\12:00\'
      page: 42 # Change Rooms
      clear-cache: 42
      values: 
        p42_slot: '12:00'

    warn-on-unsaved-changes: Do Not Check

  security: 
    authorization-scheme: Tournament Admin # 55902033226819493948

- # ====== Button: EDIT_16 =====================================
  id: 40389411770778769155
  identification: 
    button-name: EDIT_16
    label: 'Edit 16:00'

  layout: 
    sequence: 10
    region: '16:00' # 7057233707839582643
    position: EDIT
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Icon # 46995173311788514399
    hot: false
    template-options: 
    - '#DEFAULT#'
    icon: fa-chevron-right

  behavior: 
    action: Redirect to Page in this Application
    target: 
      url: 'f?p=&APP_ID.:42:&SESSION.::&DEBUG.:42:P42_SLOT:\16:00\'
      page: 42 # Change Rooms
      clear-cache: 42
      values: 
        p42_slot: '16:00'

    warn-on-unsaved-changes: Do Not Check

  security: 
    authorization-scheme: Tournament Admin # 55902033226819493948

- # ====== Button: EDIT_20 =====================================
  id: 40389411849958769156
  identification: 
    button-name: EDIT_20
    label: 'Edit 20:00'

  layout: 
    sequence: 10
    region: '20:00' # 7057233824244582645
    position: EDIT
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Icon # 46995173311788514399
    hot: false
    template-options: 
    - '#DEFAULT#'
    icon: fa-chevron-right

  behavior: 
    action: Redirect to Page in this Application
    target: 
      url: 'f?p=&APP_ID.:42:&SESSION.::&DEBUG.:42:P42_SLOT:\20:00\'
      page: 42 # Change Rooms
      clear-cache: 42
      values: 
        p42_slot: '20:00'

    warn-on-unsaved-changes: Do Not Check

  security: 
    authorization-scheme: Tournament Admin # 55902033226819493948

dynamic-actions: 
- # ====== Dynamic Action: Init Actions ========================
  id: 12528847877550025
  identification: 
    name: Init Actions

  execution: 
    sequence: 20

  when: 
    event: EVENT.EVENT.BROWSER.READY

  execution: 
    event-scope: Static

  actions: 
  - # ====== Action: Highlight Player ============================
    id: 12528961688550026
    identification: 
      name: Highlight Player
      action: Execute JavaScript Code

    settings: 
      code: $(".player").parents("tr").addClass("mark")

    execution: 
      sequence: 20
      event: Init Actions # 12528847877550025
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Add TZ Legend ===============================
    id: 13434852006291522
    identification: 
      name: Add TZ Legend
      action: Execute JavaScript Code

    settings: 
      code: |
        var out = apex.util.htmlBuilder();
        
        out.markup( "<span" )
            .attr( "class", "tzClass hidden-xs-up" )
            .markup( ">" )
            .content( tz )
            .markup( "</span>" );
        
        
        $(".room").each(
          function(i){
            // console.log(i, s[i]);
            $(this).prepend('<div class="u-tC">' + s[i] + out.toString() + '</div>');
            var $t = $(this).find('.t-Region-title');
            var t = $t.text();
            //    console.log({t});
            $t.text(t + " UTC");
          }
        );

    execution: 
      sequence: 10
      event: Init Actions # 12528847877550025
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Submit on Change ====================
  id: 37928062316930040
  identification: 
    name: Submit on Change

  execution: 
    sequence: 30

  when: 
    event: EVENT.EVENT.BROWSER.CHANGE
    selection-type: Item(s)
    item(s): 
    - P40_SHOW_AVATARS_IND

  execution: 
    event-scope: Static
    type: Immediate

  actions: 
  - # ====== Action: Submit Page =================================
    id: 37928199444930041
    identification: 
      action: Submit Page

    settings: 
      show-processing: true

    execution: 
      sequence: 10
      event: Submit on Change # 37928062316930040
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Randomizing Rooms ===================
  id: 39135136394390002
  identification: 
    name: Randomizing Rooms

  execution: 
    sequence: 40

  when: 
    event: EVENT.EVENT.BROWSER.READY

  execution: 
    event-scope: Static

  server-side-condition: 
    type: Rows returned
    sql-query: |
      select 1
      from wmg_tournament_sessions s
      where s.rooms_defined_flag = 'Y'  -- rooms defined
        and s.rooms_open_flag is null   -- but not open
        and s.id = :G_CURRENT_SESSION_ID

  security: 
    authorization-scheme: MODEL.LOV.NOT_W_ARGUMENT # 55902033226819493948

  actions: 
  - # ====== Action: Execute JavaScript Code =====================
    id: 39135273383390003
    identification: 
      action: Execute JavaScript Code

    settings: 
      code: |
        apex.theme.openRegion("pendingWarning");
        roomsReady();

    execution: 
      sequence: 10
      event: Randomizing Rooms # 39135136394390002
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Refresh on Dialog Close =============
  id: 41138679865776035
  identification: 
    name: Refresh on Dialog Close

  execution: 
    sequence: 50

  when: 
    event: EVENT.EVENT.FAMEWORK.APEXAFTERCLOSECANCELDIALOG
    selection-type: Button
    button: EDIT_00 # 40389410438139769142

  execution: 
    event-scope: Static
    type: Immediate

  actions: 
  - # ====== Action: Refresh =====================================
    id: 41138788249776036
    identification: 
      action: Refresh

    affected-elements: 
      selection-type: Region
      region: '00:00' # 7057232864153582635

    execution: 
      sequence: 10
      event: Refresh on Dialog Close # 41138679865776035
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Refresh on Dialog Close 04 ==========
  id: 41138816761776037
  identification: 
    name: Refresh on Dialog Close 04

  execution: 
    sequence: 60

  when: 
    event: EVENT.EVENT.FAMEWORK.APEXAFTERCLOSECANCELDIALOG
    selection-type: Button
    button: EDIT_04 # 40389411448742769152

  execution: 
    event-scope: Static
    type: Immediate

  actions: 
  - # ====== Action: Refresh =====================================
    id: 41138980490776038
    identification: 
      action: Refresh

    affected-elements: 
      selection-type: Region
      region: '04:00' # 7057233087460582637

    execution: 
      sequence: 10
      event: Refresh on Dialog Close 04 # 41138816761776037
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Refresh on Dialog Close 08 ==========
  id: 41139032099776039
  identification: 
    name: Refresh on Dialog Close 08

  execution: 
    sequence: 70

  when: 
    event: EVENT.EVENT.FAMEWORK.APEXAFTERCLOSECANCELDIALOG
    selection-type: Button
    button: EDIT_08 # 40389411553192769153

  execution: 
    event-scope: Static
    type: Immediate

  actions: 
  - # ====== Action: Refresh =====================================
    id: 41139123991776040
    identification: 
      action: Refresh

    affected-elements: 
      selection-type: Region
      region: '08:00' # 7057233226275582639

    execution: 
      sequence: 10
      event: Refresh on Dialog Close 08 # 41139032099776039
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Refresh on Dialog Close 12 ==========
  id: 41139256773776041
  identification: 
    name: Refresh on Dialog Close 12

  execution: 
    sequence: 80

  when: 
    event: EVENT.EVENT.FAMEWORK.APEXAFTERCLOSECANCELDIALOG
    selection-type: Button
    button: EDIT_12 # 40389411686873769154

  execution: 
    event-scope: Static
    type: Immediate

  actions: 
  - # ====== Action: Refresh =====================================
    id: 41139338963776042
    identification: 
      action: Refresh

    affected-elements: 
      selection-type: Region
      region: '12:00' # 7057233465800582641

    execution: 
      sequence: 10
      event: Refresh on Dialog Close 12 # 41139256773776041
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Refresh on Dialog Close 16 ==========
  id: 41139457214776043
  identification: 
    name: Refresh on Dialog Close 16

  execution: 
    sequence: 90

  when: 
    event: EVENT.EVENT.FAMEWORK.APEXAFTERCLOSECANCELDIALOG
    selection-type: Button
    button: EDIT_16 # 40389411770778769155

  execution: 
    event-scope: Static
    type: Immediate

  actions: 
  - # ====== Action: Refresh =====================================
    id: 41139524751776044
    identification: 
      action: Refresh

    affected-elements: 
      selection-type: Region
      region: '16:00' # 7057233707839582643

    execution: 
      sequence: 10
      event: Refresh on Dialog Close 16 # 41139457214776043
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Refresh on Dialog Close 20 ==========
  id: 41139634264776045
  identification: 
    name: Refresh on Dialog Close 20

  execution: 
    sequence: 100

  when: 
    event: EVENT.EVENT.FAMEWORK.APEXAFTERCLOSECANCELDIALOG
    selection-type: Button
    button: EDIT_20 # 40389411849958769156

  execution: 
    event-scope: Static
    type: Immediate

  actions: 
  - # ====== Action: Refresh =====================================
    id: 41139794208776046
    identification: 
      action: Refresh

    affected-elements: 
      selection-type: Region
      region: '20:00' # 7057233824244582645

    execution: 
      sequence: 10
      event: Refresh on Dialog Close 20 # 41139634264776045
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Submit Room Assignments =============
  id: 40389412001186769157
  identification: 
    name: Submit Room Assignments

  execution: 
    sequence: 10

  when: 
    event: EVENT.EVENT.BROWSER.CLICK
    selection-type: Button
    button: ASSIGN_ROOM # 24450904212536936277

  execution: 
    event-scope: Static
    type: Immediate

  actions: 
  - # ====== Action: Confirm =====================================
    id: 40389412037780769158
    identification: 
      action: Confirm

    settings: 
      title: Room Assignments
      message: Are you sure you want to run the room assignments?
      style: Information
      icon: fa-question
      confirm-label: Yes, Assign Rooms
      cancel-label: Not yet

    execution: 
      sequence: 10
      event: Submit Room Assignments # 40389412001186769157
      fire-when-event-result-is: True
      fire-on-initialization: false

    server-side-condition: 
      type: No Rows returned
      sql-query: "select 1 from wmg_tournament_sessions where id = :G_CURRENT_SESSION_ID and rooms_defined_flag = 'Y'"

  - # ====== Action: Submit Page =================================
    id: 40389412176077769159
    identification: 
      action: Submit Page

    settings: 
      request-/-button-name: ASSIGN_ROOM
      show-processing: true

    execution: 
      sequence: 30
      event: Submit Room Assignments # 40389412001186769157
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Confirm =====================================
    id: 40389412266236769160
    identification: 
      action: Confirm

    settings: 
      title: Redo Room Assignments
      message: |
        Rooms are already assigned.<br>
        Are you absolutely sure you want to re-assign the rooms?
      style: Danger
      icon: fa-danger
      confirm-label: Yes, Re-Assign Rooms
      cancel-label: Nope

    execution: 
      sequence: 20
      event: Submit Room Assignments # 40389412001186769157
      fire-when-event-result-is: True
      fire-on-initialization: false

    server-side-condition: 
      type: Rows returned
      sql-query: "select 1 from wmg_tournament_sessions where id = :G_CURRENT_SESSION_ID and rooms_defined_flag = 'Y'"

computations: 
- # ====== Computation: P40_TD_FLAG ============================
  id: 12341303465723544
  identification: 
    item-name: P40_TD_FLAG

  execution: 
    sequence: 30
    point: After Header

  computation: 
    type: Function Body
    language: PL/SQL
    pl/sql-function-body: |
      if apex_authorization.is_authorized('Administration Rights')
      or apex_authorization.is_authorized('Tournament Admin') then
        return 'Y';
      else
        return '';
      end if;

- # ====== Computation: P40_TZ =================================
  id: 22129098415688030
  identification: 
    item-name: P40_TZ

  execution: 
    sequence: 10
    point: Before Regions

  computation: 
    type: SQL Query (return single value)
    sql-query: 'select nvl(prefered_tz, sessiontimezone) from wmg_players where discord_id = :G_DISCORD_ID'

  server-side-condition: 
    type: Item is NOT NULL
    item: G_DISCORD_ID

  comments: 
    comments: The the prefered timezone for the user

- # ====== Computation: P40_TZ =================================
  id: 22129160781688031
  identification: 
    item-name: P40_TZ

  execution: 
    sequence: 20
    point: Before Regions

  computation: 
    type: Expression
    language: PL/SQL
    pl/sql-expression: sessiontimezone

  server-side-condition: 
    type: Item is NULL
    item: G_DISCORD_ID

- # ====== Computation: P40_NEW_PLAYER_ID ======================
  id: 39135828991390009
  identification: 
    item-name: P40_NEW_PLAYER_ID

  execution: 
    sequence: 30
    point: Before Regions

  computation: 
    type: Expression
    language: PL/SQL
    pl/sql-expression: nvl(wmg_util.get_param('LAST_REGISTERED_ID'), 1)

- # ====== Computation: G_REGISTRATION_ID ======================
  id: 24450904367800936279
  identification: 
    item-name: G_REGISTRATION_ID

  execution: 
    sequence: 20
    point: After Header

  computation: 
    type: Static Value
    static-value: 507

  server-side-condition: 
    type: Never

  comments: 
    comments: This is an override during development

- # ====== Computation: G_CURRENT_SESSION_ID ===================
  id: 40389409705759769134
  identification: 
    item-name: G_CURRENT_SESSION_ID

  execution: 
    sequence: 10
    point: After Header

  computation: 
    type: Static Value
    static-value: 442

  server-side-condition: 
    type: Never

  comments: 
    comments: This is an override during development

processes: 
- # ====== Process: Open Rooms =================================
  id: 12340010696723531
  identification: 
    name: Open Rooms
    type: Execute Code

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      update wmg_tournament_sessions
         set rooms_open_flag = decode(rooms_open_flag, 'Y', null, 'Y')
           , registration_closed_flag = decode(registration_closed_flag, 'Y', null, 'Y')
      where id = :G_CURRENT_SESSION_ID;

  execution: 
    sequence: 20
    point: Processing
    run-process: Once Per Page Visit (default)

  success-message: 
    success-message: Rooms are now open!

  error: 
    display-location: Inline in Notification

  server-side-condition: 
    when-button-pressed: OPEN_ROOMS # 12339952842723530

  security: 
    authorization-scheme: Tournament Admin # 55902033226819493948

- # ====== Process: ROOMS_READY ================================
  id: 39135422711390005
  identification: 
    name: ROOMS_READY
    type: Execute Code

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      declare
        l_room_open_flag wmg_tournament_sessions.rooms_open_flag%type;
      begin
        select rooms_open_flag
          into l_room_open_flag
          from wmg_tournament_sessions
         where id = apex_application.g_x01;
      
        apex_json.open_object; -- {'
        if l_room_open_flag = 'Y' then
           apex_json.write('ready', true);
        else
           apex_json.write('ready', false);
        end if;
        apex_json.close_object; -- }
      
      end;

  execution: 
    sequence: 10
    point: Ajax Callback
    run-process: Once Per Page Visit (default)

- # ====== Process: Run Room Assignments =======================
  id: 40825883569368223930
  identification: 
    name: Run Room Assignments
    type: Execute Code

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: 'wmg_util.assign_rooms(:G_CURRENT_SESSION_ID);'

  execution: 
    sequence: 10
    point: Processing
    run-process: Once Per Page Visit (default)

  success-message: 
    success-message: Rooms have been assigned, don't forget to open up the rooms!

  error: 
    display-location: Inline in Notification

  server-side-condition: 
    when-button-pressed: ASSIGN_ROOM # 24450904212536936277

  security: 
    authorization-scheme: Tournament Admin # 55902033226819493948

