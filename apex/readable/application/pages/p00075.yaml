---
# ====== Page: Verify Results ================================
id: 75
identification: 
  name: Verify Results
  alias: VERIFY-RESULTS
  title: Verify Results

appearance: 
  page-mode: Normal
  page-template: Theme Default
  template-options: 
  - '#DEFAULT#'

navigation-menu: 
  override-user-interface-level: false

navigation: 
  cursor-focus: Do not focus cursor
  warn-on-unsaved-changes: false

javascript: 
  file-urls: 
  - //cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js

css: 
  file-urls: 
  - '#APP_FILES#css/week-lov#MIN#.css'
  inline: |
    .noshow, .verification, .roomVerification {cursor:pointer;}
    .vYES {color: green;}
    .vERROR {color: red;}
    .vYES:before {content: "\f14a";}
    .NA_:before,.vNO:before {content: "\f096";}
    .vERROR:before {content: "\eb00";}
    span.NA_Y:before {content: "\e9e5"; color: orange;font-weight: bold;}
    
    .is-current .roomVerification.vYES {
        color: #00cc00;
    }
    
    tr.NA_Y td{text-decoration: line-through; opacity: 50%;}
    tr.NA_Y td[headers="NO_SHOW_FLAG"],
    tr.NA_Y td[headers^="VERIFIE"] {text-decoration:none; opacity: 100%;}
    
    td[headers^="ROOM_NO"] div {font-weight: bold; font-size: 1.1rem}
    td[headers^="ROOM_NO"] div a {color: var(--ut-region-text-color,var(--ut-component-text-default-color));}
    
    td[headers^="ROOM_NO"].is-current,
    td[headers^="ROOM_NO"].is-current div,
    td[headers^="ROOM_NO"].is-current a {
    background-color: var(--u-color-1);
    color: white;
    }
    #roomTabs td[headers^="ROOM_NO"] {padding-inline-start: 0;}
    #roomTabs th[id^="ROOM_NO"] {display: none;}
    #roomTabs {background-color: lightgray;}

security: 
  authorization-scheme: Contribution Rights # 46995203801871514425
  authentication: Page Requires Authentication
  deep-linking: Application Default
  page-access-protection: Arguments Must Have Checksum
  form-auto-complete: Off
  browser-cache: Application Default

session-management: 
  rejoin-sessions: Application Default

advanced: 
  enable-duplicate-page-submissions: Yes - Enable page to be re-posted
  reload-on-submit: Only for Success

server-cache: 
  caching: Disabled

regions: 
- # ====== Region: Verify Results ==============================
  id: 11998064850694896
  identification: 
    title: Verify Results
    type: Classic Report

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      with scorecards as (
        select p.week
             , r.pos
             , p.player_id
             , p.tournament_player_id
             , p.player_name
             , p.discord_id
             , p.time_slot
             , p.room_no
             , r.easy_par
             , r.hard_par
             , r.total_score
             , r.easy_round_id
             , r.hard_round_id
             , r.round_created_on
             , r.easy_scorecard
             , r.hard_scorecard
             , r.total_scorecard
             , p.rank_name
             , p.rank_list_class
             , p.rank_code
             , p.verified_score_flag
             , p.verified_note
             , p.verified_by
             , p.verified_on
             , p.no_show_flag
          from wmg_tournament_results_v r
             , wmg_tournament_player_v p
         where p.week = r.week (+)
           and p.player_id = r.player_id (+)
           and p.week = :P75_WEEK
           and p.active_ind = 'Y'
           and (:P75_SLOT is null or :P75_SLOT = p.time_slot)
           and (:P75_ROOM is null or to_number(:P75_ROOM default null on conversion error) = p.room_no)
      )
      select pos
           , time_slot
           , room_no
           , player_id
           , tournament_player_id
           , wmg_discord.avatar_link(p_discord_id => discord_id) avatar
           , player_name
           , player_rank
           , easy_scorecard
           , hard_scorecard
           , total_scorecard
           , easy_round_id
           , hard_round_id
           , round_created_on
           , easy_par
           , hard_par
           , total_score
           , easy_diff
           , hard_diff
           , verification_class
           , verified
           , verified_score_flag
           , verified_note
           , verified_by
           , verified_on
           , no_show_flag
      from  (
          select s.pos
               , s.time_slot
               , s.room_no
               , s.player_id
               , s.discord_id
               , s.tournament_player_id
               , s.player_name
               , case when s.rank_code = 'NEW' then '<span class="' || s.rank_list_class || ' tooltip" title="' || s.rank_name || '"></span>' end player_rank
               , s.easy_scorecard
               , s.hard_scorecard
               , s.total_scorecard
               , s.easy_round_id
               , s.hard_round_id
               , s.round_created_on
               , s.easy_par
               , s.hard_par
               , s.total_score
               , case when (nvl(s.easy_scorecard, -999) != nvl(s.easy_par, -999)) then 'mark' else '' end easy_diff
               , case when (nvl(s.hard_scorecard, -999) != nvl(s.hard_par, -999)) then 'mark' else '' end hard_diff
               , case 
                   when  s.easy_scorecard = s.easy_par
                     and s.hard_scorecard = s.hard_par
                     and s.total_scorecard = s.total_score
                  then 
                     'Y'
                   else 
                     'N'
                   end verification_class
                , case 
                     when (s.total_scorecard != s.total_score)
                     then 1
                     when pos is null then 3
                     else 2 
                  end display_seq
                , decode(s.verified_score_flag, null, 'NO', 'E', 'ERROR', 'YES') verified
                , s.verified_score_flag
                , s.verified_note
                , s.verified_by
                , s.verified_on
                , s.no_show_flag
            from scorecards s
      )
      where (:P75_SHOW_NO_SHOWS_FLAG = 'N' or (:P75_SHOW_NO_SHOWS_FLAG = 'Y' and no_show_flag = 'Y'))
        and (:P75_DIFF_ONLY_FLAG = 'N' or (verification_class = 'N' or :P75_SHOW_NO_SHOWS_FLAG = 'Y' ))
        and ((:P75_SHOW_MISSING_FLAG = 'N' and pos is not null) or :P75_SHOW_MISSING_FLAG = 'Y')
        and (( :P75_SHOW_VERYFIED_FLAG = 'N' and verified_score_flag is null or :P75_SHOW_NO_SHOWS_FLAG = 'Y') or (:P75_SHOW_VERYFIED_FLAG in ('Y', 'E') ))
      order by time_slot, room_no, display_seq
         , pos
      
    page-items-to-submit: 
    - P75_WEEK
    - P75_DIFF_ONLY_FLAG
    - P75_SHOW_MISSING_FLAG
    - P75_SHOW_VERYFIED_FLAG
    - P75_SHOW_NO_SHOWS_FLAG
    - P75_SLOT
    - P75_ROOM

  layout: 
    sequence: 139
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: false
    column: 2
    new-column: true
    column-span: 10
    column-css-classes: 
    - padding-left-none
    - null
    - col-xxs-10
    - col-sm-11

  appearance: 
    template: Standard # 46995101107768514367
    template-options: 
    - '#DEFAULT#'
    - t-Region--noPadding
    - t-Region--hideHeader
    - t-Region--scrollBody
    - margin-left-none
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    static-id: verifyRegion
    region-display-selector: false
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    layout: 
      number-of-rows-type: Static Value
      number-of-rows: 200

    appearance: 
      template-type: Theme
      template: Standard # 46995138939704514382
      template-options: 
      - '#DEFAULT#'
      - t-Report--stretch
      - t-Report--staticRowColors
      - t-Report--rowHighlight
      - t-Report--inline

    pagination: 
      type: Row Ranges X to Y (with next and previous links)
      display-position: Bottom - Right
      partial-page-refresh: true

    performance: 
      lazy-loading: false
      maximum-rows-to-process: 500

    messages: 
      when-no-data-found: no data found

    break-formatting: 
      break-columns: No Break

    advanced: 
      strip-html: false
      sort-nulls: Last

    heading: 
      type: Custom Headings

    download: 
      csv-export-enabled: false

    printing: 
      enabled: false

  columns: 
  - # ====== Column: PLAYER_NAME =================================
    id: 11990771731685602
    identification: 
      column-name: PLAYER_NAME
      type: Link

    heading: 
      heading: Player
      alignment: center

    layout: 
      sequence: 90
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    link: 
      target: 
        url: 'f?p=&APP_ID.:50:&SESSION.::&DEBUG.:50:P50_PLAYERS_ID,P50_E_ID,P50_H_ID,P50_PREV_PAGE_ID:#PLAYER_ID#,#EASY_ROUND_ID#,#HARD_ROUND_ID#,&APP_PAGE_ID.#TOURNAMENT_SESSION_ID#'
        page: 50 # Enter Rounds
        clear-cache: 50
        values: 
          p50_players_id: '#PLAYER_ID#'
          p50_e_id: '#EASY_ROUND_ID#'
          p50_h_id: '#HARD_ROUND_ID#'
          p50_prev_page_id: '&APP_PAGE_ID.#TOURNAMENT_SESSION_ID#'

      link-text: '#PLAYER_NAME# #PLAYER_RANK#'

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: EASY_PAR ====================================
    id: 11991133938685606
    identification: 
      column-name: EASY_PAR
      type: Plain Text

    heading: 
      heading: Submitted<br>Easy Score
      alignment: center

    layout: 
      sequence: 140
      column-alignment: end

    accessibility: 
      value-identifies-row: false

    column-formatting: 
      html-expression: <span class="#EASY_DIFF#">#EASY_PAR#</span>

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: HARD_PAR ====================================
    id: 11991217719685607
    identification: 
      column-name: HARD_PAR
      type: Plain Text

    heading: 
      heading: Submitted<br>Hard Score
      alignment: center

    layout: 
      sequence: 150
      column-alignment: end

    accessibility: 
      value-identifies-row: false

    column-formatting: 
      html-expression: <span class="#HARD_DIFF#">#HARD_PAR#</span>

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: VERIFICATION_CLASS ==========================
    id: 11991589372685610
    identification: 
      column-name: VERIFICATION_CLASS
      type: Plain Text

    heading: 
      heading: âœ…
      alignment: center

    layout: 
      sequence: 40
      column-alignment: center

    accessibility: 
      value-identifies-row: false

    column-formatting: 
      html-expression: <i class="fa cfa-check_#VERIFICATION_CLASS# cfa-1_5x" title="#VERIFICATION_CLASS#"></i>

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: EASY_DIFF ===================================
    id: 11991790756685612
    identification: 
      column-name: EASY_DIFF
      type: Hidden Column

    layout: 
      sequence: 180

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: HARD_DIFF ===================================
    id: 11991802664685613
    identification: 
      column-name: HARD_DIFF
      type: Hidden Column

    layout: 
      sequence: 190

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: PLAYER_ID ===================================
    id: 11991953271685614
    identification: 
      column-name: PLAYER_ID
      type: Hidden Column

    layout: 
      sequence: 60

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: EASY_ROUND_ID ===============================
    id: 11992346297685618
    identification: 
      column-name: EASY_ROUND_ID
      type: Hidden Column

    layout: 
      sequence: 200

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: HARD_ROUND_ID ===============================
    id: 11992418507685619
    identification: 
      column-name: HARD_ROUND_ID
      type: Hidden Column

    layout: 
      sequence: 210

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: TOTAL_SCORE =================================
    id: 12000432398695377
    identification: 
      column-name: TOTAL_SCORE
      type: Hidden Column

    layout: 
      sequence: 160

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: PLAYER_RANK =================================
    id: 38738673678129119
    identification: 
      column-name: PLAYER_RANK
      type: Hidden Column

    layout: 
      sequence: 100

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: false

  - # ====== Column: TIME_SLOT ===================================
    id: 39136185214390012
    identification: 
      column-name: TIME_SLOT
      type: Plain Text

    heading: 
      heading: Slot
      alignment: center

    layout: 
      sequence: 20
      column-alignment: center

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: ROOM_NO =====================================
    id: 39136287904390013
    identification: 
      column-name: ROOM_NO
      type: Plain Text

    heading: 
      heading: Room No
      alignment: center

    layout: 
      sequence: 30
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    column-formatting: 
      html-expression: WMGT#ROOM_NO#

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: POS =========================================
    id: 39562501245969848
    identification: 
      column-name: POS
      type: Hidden Column

    layout: 
      sequence: 10

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: EASY_SCORECARD ==============================
    id: 39562685289969849
    identification: 
      column-name: EASY_SCORECARD
      type: Plain Text

    heading: 
      heading: Easy Scorecard
      alignment: center

    layout: 
      sequence: 110
      column-alignment: end

    accessibility: 
      value-identifies-row: false

    column-formatting: 
      html-expression: <span class="#EASY_DIFF#">#EASY_SCORECARD#</span>
      css-classes: 
      - scorecard

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: HARD_SCORECARD ==============================
    id: 39562774681969850
    identification: 
      column-name: HARD_SCORECARD
      type: Plain Text

    heading: 
      heading: Hard Scorecard
      alignment: center

    layout: 
      sequence: 120
      column-alignment: end

    accessibility: 
      value-identifies-row: false

    column-formatting: 
      html-expression: <span class="#HARD_DIFF#">#HARD_SCORECARD#</span>
      css-classes: 
      - scorecard

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: TOTAL_SCORECARD =============================
    id: 41135299322776001
    identification: 
      column-name: TOTAL_SCORECARD
      type: Hidden Column

    layout: 
      sequence: 130

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: VERIFIED_SCORE_FLAG =========================
    id: 41135619662776005
    identification: 
      column-name: VERIFIED_SCORE_FLAG
      type: Hidden Column

    layout: 
      sequence: 220

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: VERIFIED_BY =================================
    id: 41135748965776006
    identification: 
      column-name: VERIFIED_BY
      type: Hidden Column

    layout: 
      sequence: 260

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: VERIFIED_ON =================================
    id: 41135859371776007
    identification: 
      column-name: VERIFIED_ON
      type: Plain Text

    heading: 
      heading: Verified When
      alignment: center

    layout: 
      sequence: 250
      column-alignment: center

    accessibility: 
      value-identifies-row: false

    appearance: 
      format-mask: SINCE_SHORT

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: VERIFIED ====================================
    id: 41135988217776008
    identification: 
      column-name: VERIFIED
      type: Plain Text

    heading: 
      heading: Verified
      alignment: center

    layout: 
      sequence: 240
      column-alignment: center

    accessibility: 
      value-identifies-row: false

    column-formatting: 
      html-expression: '<span aria-hidden="true" data-id="#TOURNAMENT_PLAYER_ID#" class="verification fa v#VERIFIED#" title="Verified: #VERIFIED# #VERIFIED_BY# #VERIFIED_ON#"></span>'

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: TOURNAMENT_PLAYER_ID ========================
    id: 41136059348776009
    identification: 
      column-name: TOURNAMENT_PLAYER_ID
      type: Hidden Column

    layout: 
      sequence: 70

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: AVATAR ======================================
    id: 41137452682776023
    identification: 
      column-name: AVATAR
      type: Plain Text

    heading: 
      heading: Avatar
      alignment: center

    layout: 
      sequence: 80
      column-alignment: center

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: false

  - # ====== Column: VERIFIED_NOTE ===============================
    id: 43960696557790342
    identification: 
      column-name: VERIFIED_NOTE
      type: Plain Text

    heading: 
      heading: Notes
      alignment: center

    layout: 
      sequence: 270
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: NO_SHOW_FLAG ================================
    id: 46932932793678607
    identification: 
      column-name: NO_SHOW_FLAG
      type: Plain Text

    heading: 
      heading: No Show?
      alignment: center

    layout: 
      sequence: 230
      column-alignment: center

    accessibility: 
      value-identifies-row: false

    column-formatting: 
      html-expression: <span aria-hidden="true" data-id="#TOURNAMENT_PLAYER_ID#" class="noshow fa NA_#NO_SHOW_FLAG#" title="Player did not show"></span>

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: ROUND_CREATED_ON ============================
    id: 49532418866520845
    identification: 
      column-name: ROUND_CREATED_ON
      type: Plain Text

    heading: 
      heading: When
      alignment: center

    layout: 
      sequence: 170
      column-alignment: center

    accessibility: 
      value-identifies-row: false

    appearance: 
      format-mask: SINCE_SHORT

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

- # ====== Region: Note ========================================
  id: 43960816507790344
  identification: 
    title: Note
    type: Static Content

  layout: 
    sequence: 149
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Inline Popup # 46995091106884514363
    template-options: 
    - '#DEFAULT#'
    - js-dialog-size480x320
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: true
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Rooms =======================================
  id: 48741676080254422
  identification: 
    title: Rooms
    type: Classic Report

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      select decode(:P75_SLOT, null, time_slot, null) split_group
           , id
           , time_slot
           , room_no
           , case when to_number(:P75_ROOM default null on conversion error) = r.room_no then 'is-current' else '' end current_class
           , decode(r.verified_score_flag, null, 'NO', 'E', 'ERROR', 'YES') verified
           , verified_score_flag
           , verified_by
           , verified_on
        from wmg_tournament_rooms r
       where r.tournament_session_id = (select id from wmg_tournament_sessions where week = :P75_WEEK)
         and (:P75_SLOT is null or :P75_SLOT = r.time_slot)
      order by r.time_slot, r.room_no
    page-items-to-submit: 
    - P75_WEEK
    - P75_ROOM
    - P75_SLOT

  layout: 
    sequence: 129
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: 1
    column-css-classes: 
    - padding-right-none
    - null
    - col-xxs-2
    - col-sm-1

  appearance: 
    template: Blank with Attributes # 46995040627542514343
    template-options: 
    - '#DEFAULT#'
    - margin-right-none
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    static-id: roomTabs
    region-display-selector: true
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    layout: 
      number-of-rows-type: Static Value
      number-of-rows: 50

    appearance: 
      template-type: Theme
      template: Standard # 46995138939704514382
      template-options: 
      - '#DEFAULT#'
      - t-Report--stretch
      - t-Report--staticRowColors
      - t-Report--rowHighlightOff
      - t-Report--hideNoPagination

    pagination: 
      type: No Pagination (Show All Rows)
      partial-page-refresh: true

    performance: 
      lazy-loading: false

    break-formatting: 
      break-columns: First Column
      style: Repeat Headings on Break
      repeat-heading-format: <b>#COLUMN_VALUE#</b>

    advanced: 
      strip-html: false
      sort-nulls: Last

    heading: 
      type: None

    download: 
      csv-export-enabled: false

    printing: 
      enabled: false

  columns: 
  - # ====== Column: ID ==========================================
    id: 48741793860254423
    identification: 
      column-name: ID
      type: Hidden Column

    layout: 
      sequence: 20

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: TIME_SLOT ===================================
    id: 48741833380254424
    identification: 
      column-name: TIME_SLOT
      type: Hidden Column

    layout: 
      sequence: 30

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: ROOM_NO =====================================
    id: 48741946498254425
    identification: 
      column-name: ROOM_NO
      type: Plain Text

    heading: 
      heading: Room No
      alignment: center

    layout: 
      sequence: 40
      column-alignment: end

    accessibility: 
      value-identifies-row: false

    column-formatting: 
      html-expression: |
        <div data-room="#ROOM_NO#" data-id="#ID#" class="roomTab #CURRENT_CLASS#">
        <span aria-hidden="true"  data-id="#ID#" class="roomVerification fa v#VERIFIED#" title="Verified: #VERIFIED# #VERIFIED_BY# #VERIFIED_ON#"></span>
        <a href="javascript:$s('P75_ROOM', #ROOM_NO#);"><span class="hidden-xs-down">WGMT</span>#ROOM_NO#<a/>
        </div>

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: VERIFIED_SCORE_FLAG =========================
    id: 48742013017254426
    identification: 
      column-name: VERIFIED_SCORE_FLAG
      type: Hidden Column

    layout: 
      sequence: 70

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: VERIFIED_BY =================================
    id: 48742198049254427
    identification: 
      column-name: VERIFIED_BY
      type: Hidden Column

    layout: 
      sequence: 80

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: VERIFIED_ON =================================
    id: 48742235526254428
    identification: 
      column-name: VERIFIED_ON
      type: Hidden Column

    layout: 
      sequence: 90

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: CURRENT_CLASS ===============================
    id: 48742471310254430
    identification: 
      column-name: CURRENT_CLASS
      type: Hidden Column

    layout: 
      sequence: 50

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: VERIFIED ====================================
    id: 48742877604254434
    identification: 
      column-name: VERIFIED
      type: Hidden Column

    layout: 
      sequence: 60

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: SPLIT_GROUP =================================
    id: 49532550358520846
    identification: 
      column-name: SPLIT_GROUP
      type: Plain Text

    heading: 
      heading: Time Slot
      alignment: center

    layout: 
      sequence: 10
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    server-side-condition: 
      type: Item is NULL
      item: P75_SLOT

    security: 
      escape-special-characters: true

page-items: 
- # ====== Page Item: P75_DIFF_ONLY_FLAG =======================
  id: 11992577855685620
  identification: 
    name: P75_DIFF_ONLY_FLAG
    type: Switch

  label: 
    label: Show Differences Only
    alignment: Left

  settings: 
    use-defaults: true

  layout: 
    sequence: 19
    region: No Parent
    position: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: 2
    label-column-span: Page Template Default
    column-css-classes: 
    - col-xxs-3

  appearance: 
    template: Optional - Floating # 46995171503553514398
    template-options: 
    - '#DEFAULT#'

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  default: 
    type: Static
    static-value: N

  session-state: 
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

  help: 
    help-text: Only players with discrepancies or a missing course will be displayed.

- # ====== Page Item: P75_WEEK =================================
  id: 12007795519798223
  identification: 
    name: P75_WEEK
    type: Popup LOV

  label: 
    label: Week
    alignment: Left

  settings: 
    display-as: Inline Popup
    initial-fetch: Automatic
    multiple-values: false
    manual-entry: false
    search-as-you-type: true
    minimum-characters: No minimum (0)

  layout: 
    sequence: 9
    region: No Parent
    position: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: 2
    new-column: true
    column-span: 3
    label-column-span: Page Template Default
    column-css-classes: 
    - col-xss-6
    - col-xs-6
    - col-sm-6
    - col-md-6

  appearance: 
    template: Optional - Floating # 46995171503553514398
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  list-of-values: 
    type: Shared Component
    list-of-values: WEEKS # 41203762596358122145
    display-extra-values: true
    display-null-value: true

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

  advanced: 
    initialization-javascript-function: wmgt.theme.weekLovTemplate

- # ====== Page Item: P75_SLOT =================================
  id: 39135948061390010
  identification: 
    name: P75_SLOT
    type: Select List

  label: 
    label: Slot
    alignment: Left

  settings: 
    page-action-on-selection: None
    allow-multi-selection: false

  layout: 
    sequence: 89
    region: No Parent
    position: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: 1
    label-column-span: Page Template Default
    column-css-classes: 
    - col-xxs-6
    - col-sm-2

  appearance: 
    template: Optional - Floating # 46995171503553514398
    template-options: 
    - '#DEFAULT#'
    height: 1

  validation: 
    value-required: false

  list-of-values: 
    type: Shared Component
    list-of-values: TIME_SLOTS # 40414543942160352036
    display-extra-values: true
    display-null-value: true
    null-display-value: '- All -'

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P75_ROOM =================================
  id: 39136049405390011
  identification: 
    name: P75_ROOM
    type: Number Field

  label: 
    label: Room
    alignment: Left

  settings: 
    number-alignment: Start
    virtual-keyboard: Decimal

  layout: 
    sequence: 99
    region: No Parent
    position: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: 1
    label-column-span: Page Template Default
    column-css-classes: 
    - col-xxs-6
    - col-sm-2

  appearance: 
    template: Optional - Floating # 46995171503553514398
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P75_SHOW_MISSING_FLAG ====================
  id: 41135324279776002
  identification: 
    name: P75_SHOW_MISSING_FLAG
    type: Switch

  label: 
    label: Show Missing Submissions?
    alignment: Left

  settings: 
    use-defaults: true

  layout: 
    sequence: 29
    region: No Parent
    position: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: 2
    label-column-span: Page Template Default
    column-css-classes: 
    - col-xxs-3

  appearance: 
    template: Optional - Floating # 46995171503553514398
    template-options: 
    - '#DEFAULT#'

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  default: 
    type: Static
    static-value: Y

  session-state: 
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

  help: 
    help-text: Show players that have not submitted scores or entered their scoresheets

- # ====== Page Item: P75_ID ===================================
  id: 41136384543776012
  identification: 
    name: P75_ID
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 59
    region: No Parent
    position: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P75_SEARCH ===============================
  id: 41136894398776017
  identification: 
    name: P75_SEARCH
    type: Text Field

  label: 
    label: Search
    alignment: Left

  settings: 
    subtype: Search
    trim-spaces: Leading and Trailing
    text-case: NO CHANGE
    submit-when-enter-pressed: true
    disabled: false

  layout: 
    sequence: 109
    region: No Parent
    position: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: 4
    label-column-span: Page Template Default
    column-css-classes: 
    - col-xxs-6

  appearance: 
    template: Optional - Floating # 46995171503553514398
    template-options: 
    - '#DEFAULT#'
    - t-Form-fieldContainer--stretchInputs
    icon: fa-search
    width: 30

  validation: 
    value-required: false

  advanced: 
    post-text-: '"CLEAR_BUTTON"'
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P75_SHOW_VERYFIED_FLAG ===================
  id: 41137137872776020
  identification: 
    name: P75_SHOW_VERYFIED_FLAG
    type: Switch

  label: 
    label: Show Verified?
    alignment: Left

  settings: 
    use-defaults: true

  layout: 
    sequence: 39
    region: No Parent
    position: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: 2
    label-column-span: Page Template Default
    column-css-classes: 
    - col-xxs-3

  appearance: 
    template: Optional - Floating # 46995171503553514398
    template-options: 
    - '#DEFAULT#'

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  default: 
    type: Static
    static-value: Y

  session-state: 
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

  help: 
    help-text: Show the verified scoresheets. Verified means someone look at the scorecard and confirmed it matches the score submission.

- # ====== Page Item: P75_NEW_FLAG =============================
  id: 43960706365790343
  identification: 
    name: P75_NEW_FLAG
    type: Hidden

  settings: 
    value-protected: false

  layout: 
    sequence: 69
    region: No Parent
    position: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P75_VERIFICATION_NOTE ====================
  id: 43960917057790345
  identification: 
    name: P75_VERIFICATION_NOTE
    type: Textarea

  label: 
    label: Note
    alignment: Left

  settings: 
    resizable: true
    auto-height: false
    character-counter: false
    trim-spaces: Leading and Trailing

  layout: 
    sequence: 10
    region: Note # 43960816507790344
    position: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating # 46995171503553514398
    template-options: 
    - '#DEFAULT#'
    width: 30
    height: 5

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P75_SHOW_NO_SHOWS_FLAG ===================
  id: 46933662109678614
  identification: 
    name: P75_SHOW_NO_SHOWS_FLAG
    type: Switch

  label: 
    label: Show No Shows?
    alignment: Left

  settings: 
    use-defaults: true

  layout: 
    sequence: 49
    region: No Parent
    position: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: 2
    label-column-span: Page Template Default
    column-css-classes: 
    - col-xxs-3

  appearance: 
    template: Optional - Floating # 46995171503553514398
    template-options: 
    - '#DEFAULT#'

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  default: 
    type: Static
    static-value: N

  session-state: 
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

  help: 
    help-text: Show the "No Show" players only

- # ====== Page Item: P75_SPACER ===============================
  id: 49532895945520849
  identification: 
    name: P75_SPACER
    type: Display Only

  label: 
    label: New
    alignment: Left

  settings: 
    format: Plain Text
    based-on: Item Value
    show-line-breaks: true
    send-on-page-submit: true

  layout: 
    sequence: 79
    region: No Parent
    position: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: 1
    new-column: true
    column-span: 1
    label-column-span: 0
    column-css-classes: 
    - hidden-sm-down

  appearance: 
    template: Hidden # 46995171218955514398
    template-options: 
    - '#DEFAULT#'

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

buttons: 
- # ====== Button: ADD_NOTE ====================================
  id: 43961015185790346
  identification: 
    button-name: ADD_NOTE
    label: Add Note

  layout: 
    sequence: 20
    region: Note # 43960816507790344
    position: CREATE
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Text with Icon # 46995174047152514400
    hot: true
    template-options: 
    - '#DEFAULT#'
    - t-Button--iconLeft
    icon: fa-check

  behavior: 
    action: Defined by Dynamic Action
    execute-validations: true

- # ====== Button: CANCEL_NOTE =================================
  id: 43961464901790350
  identification: 
    button-name: CANCEL_NOTE
    label: Cancel

  layout: 
    sequence: 30
    region: Note # 43960816507790344
    position: CLOSE
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Text with Icon # 46995174047152514400
    hot: false
    template-options: 
    - '#DEFAULT#'
    - t-Button--iconLeft
    icon: fa-chevron-left

  behavior: 
    action: Defined by Dynamic Action
    execute-validations: true

- # ====== Button: CREATE ======================================
  id: 45123990407267741
  identification: 
    button-name: CREATE
    label: Add New Round

  layout: 
    sequence: 119
    region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: false
    column: Automatic
    new-column: true
    column-span: 2
    column-css-classes: 
    - col-xxs-6
    - col-sm-4
    alignment: Left center

  appearance: 
    button-template: Text with Icon # 46995174047152514400
    hot: true
    template-options: 
    - '#DEFAULT#'
    - t-Button--iconRight
    - t-Button--stretch
    - t-Button--gapTop
    icon: fa-soccer-ball-o

  behavior: 
    action: Redirect to Page in this Application
    target: 
      url: 'f?p=&APP_ID.:9:&SESSION.::&DEBUG.:9::'
      page: 9 # Round
      clear-cache: 9

    warn-on-unsaved-changes: Do Not Check

dynamic-actions: 
- # ====== Dynamic Action: Refresh Data ========================
  id: 11991347459685608
  identification: 
    name: Refresh Data

  execution: 
    sequence: 10

  when: 
    event: EVENT.EVENT.BROWSER.CHANGE
    selection-type: Item(s)
    item(s): 
    - P75_WEEK
    - P75_DIFF_ONLY_FLAG
    - P75_SHOW_MISSING_FLAG
    - P75_SHOW_VERYFIED_FLAG
    - P75_SHOW_NO_SHOWS_FLAG
    - P75_SLOT
    - P75_ROOM

  execution: 
    event-scope: Static
    type: Immediate

  actions: 
  - # ====== Action: Refresh =====================================
    id: 11991410143685609
    identification: 
      action: Refresh

    affected-elements: 
      selection-type: Region
      region: Verify Results # 11998064850694896

    execution: 
      sequence: 10
      event: Refresh Data # 11991347459685608
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Refresh =====================================
    id: 48742598056254431
    identification: 
      action: Refresh

    affected-elements: 
      selection-type: Region
      region: Rooms # 48741676080254422

    execution: 
      sequence: 20
      event: Refresh Data # 11991347459685608
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Toggle Player Verification ==========
  id: 41136182668776010
  identification: 
    name: Toggle Player Verification

  execution: 
    sequence: 20

  when: 
    event: EVENT.EVENT.BROWSER.CLICK
    selection-type: jQuery Selector
    jquery-selector: .verification

  execution: 
    event-scope: Dynamic
    type: Immediate

  actions: 
  - # ====== Action: Get player ID ===============================
    id: 41136276216776011
    identification: 
      name: Get player ID
      action: Set Value

    settings: 
      set-type: JavaScript Expression
      javascript-expression: this.triggeringElement.dataset.id
      suppress-change-event: false

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P75_ID

    execution: 
      sequence: 20
      event: Toggle Player Verification # 41136182668776010
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

  - # ====== Action: Execute Server-side Code ====================
    id: 41136439411776013
    identification: 
      action: Execute Server-side Code

    settings: 
      language: PE.PROPERTY.SOURCE_SNIPPET_LANG.LOV.PLSQL.D
      pl/sql-code: |
        declare
         l_tournament_session_id wmg_tournament_sessions.id%type;
         l_verified_score_flag   wmg_tournament_rooms.verified_score_flag%type;
         l_time_slot wmg_tournament_rooms.time_slot%type;
         l_room_no   wmg_tournament_rooms.room_no%type;
        begin
        -- toggle the verification
        update wmg_tournament_players
           set verified_score_flag = case
                                       when verified_score_flag is null then 'Y'
                                       when verified_score_flag = 'Y' then 'E'
                                       when verified_score_flag = 'E' then null
                                    end
             , verified_by = case when verified_score_flag = 'Y' or verified_score_flag is null then sys_context('APEX$SESSION','APP_USER') else null end
             , verified_on = case when verified_score_flag = 'Y' or verified_score_flag is null then current_timestamp else null end
             , verified_note = case when verified_score_flag = 'Y' or verified_score_flag is null then verified_note else null end
        where id = :P75_ID
        returning verified_score_flag into :P75_NEW_FLAG;
        
        begin
            select distinct tournament_session_id, verified_score_flag, time_slot, room_no
              into l_tournament_session_id, l_verified_score_flag, l_time_slot, l_room_no
            from wmg_tournament_players
            where (tournament_session_id, time_slot, room_no) in (
                select tournament_session_id, time_slot, room_no
                  from wmg_tournament_players
                 where id = :P75_ID
            );
        exception
        when TOO_MANY_ROWS then
          l_verified_score_flag := null;
        end;
        
        update wmg_tournament_rooms
           set verified_score_flag = l_verified_score_flag
         where tournament_session_id = l_tournament_session_id
           and time_slot = l_time_slot
           and room_no = l_room_no;
        
        end;
        
      items-to-submit: 
      - P75_ID
      items-to-return: 
      - P75_NEW_FLAG
      suppress-change-event: false

    execution: 
      sequence: 50
      event: Toggle Player Verification # 41136182668776010
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

  - # ====== Action: Refresh =====================================
    id: 41136541870776014
    identification: 
      action: Refresh

    affected-elements: 
      selection-type: Region
      region: Verify Results # 11998064850694896

    execution: 
      sequence: 60
      event: Toggle Player Verification # 41136182668776010
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Remove Class ================================
    id: 41136649083776015
    identification: 
      action: Remove Class

    settings: 
      class: vNO vYES vERR verification

    affected-elements: 
      selection-type: Triggering Element

    execution: 
      sequence: 10
      event: Toggle Player Verification # 41136182668776010
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Add Class ===================================
    id: 41136713259776016
    identification: 
      action: Add Class

    settings: 
      class: fa-square-selected-o fa-anim-spin

    affected-elements: 
      selection-type: Triggering Element

    execution: 
      sequence: 40
      event: Toggle Player Verification # 41136182668776010
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Refresh =====================================
    id: 48743561596254441
    identification: 
      action: Refresh

    affected-elements: 
      selection-type: Region
      region: Rooms # 48741676080254422

    execution: 
      sequence: 70
      event: Toggle Player Verification # 41136182668776010
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Search as you type ==================
  id: 41136958819776018
  identification: 
    name: Search as you type

  execution: 
    sequence: 50

  when: 
    event: EVENT.EVENT.BROWSER.KEYUP
    selection-type: Item(s)
    item(s): 
    - P75_SEARCH

  execution: 
    event-scope: Dynamic
    type: Immediate

  actions: 
  - # ====== Action: Execute JavaScript Code =====================
    id: 41137068798776019
    identification: 
      action: Execute JavaScript Code

    settings: 
      code: |
        // Highlight the search term using markjs.io (and even filter away the non-matching lines)
        // var $ctx=$("#report_table_weekResults .t-Report-cell[headers='PLAYER_NAME']")
        var $ctx=$("#report_table_verifyRegion .t-Report-cell[headers='PLAYER_NAME']")
          , term=$v("P75_SEARCH");
        
        
        // Remove previous marked elements and ensure they all show
        $ctx.unmark().parents("tr").show();
        
        if (term) {
          // mark the search term and hide everything that didn't get marked
          $ctx.mark(term, {
            separateWordSearch: false,
            diacritics: true,
            done: function() {
              $ctx.not(":has(mark)").parents("tr").hide();
            }
          });
        }
        
        

    execution: 
      sequence: 10
      event: Search as you type # 41136958819776018
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Tooltips ============================
  id: 41137260035776021
  identification: 
    name: Tooltips

  execution: 
    sequence: 60

  when: 
    event: EVENT.EVENT.FAMEWORK.APEXAFTERREFRESH
    selection-type: Region
    region: Verify Results # 11998064850694896

  execution: 
    event-scope: Static
    type: Immediate

  actions: 
  - # ====== Action: Execute JavaScript Code =====================
    id: 41137340911776022
    identification: 
      action: Execute JavaScript Code

    settings: 
      code: |
        $(".verification").tooltip()
        
        $(".NA_Y").each(function (i){
          let el = this;
          $(el).parents("tr").addClass("NA_Y");
        });

    execution: 
      sequence: 10
      event: Tooltips # 41137260035776021
      fire-when-event-result-is: True
      fire-on-initialization: true

- # ====== Dynamic Action: Clear Result on Clear ===============
  id: 43959613362790332
  identification: 
    name: Clear Result on Clear

  execution: 
    sequence: 70

  when: 
    event: EVENT.EVENT.BROWSER.CHANGE
    selection-type: Item(s)
    item(s): 
    - P75_SEARCH

  client-side-condition: 
    type: Item is null
    item: P75_SEARCH

  execution: 
    event-scope: Static
    type: Immediate

  actions: 
  - # ====== Action: Execute JavaScript Code =====================
    id: 43959768817790333
    identification: 
      action: Execute JavaScript Code

    settings: 
      code: |
        var $ctx=$("#report_table_verifyRegion .t-Report-cell[headers='PLAYER_NAME']");
        // Remove previous marked elements and ensure they all show
        $ctx.unmark().parents("tr").show();

    execution: 
      sequence: 10
      event: Clear Result on Clear # 43959613362790332
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Open Notes for Error ================
  id: 43961121223790347
  identification: 
    name: Open Notes for Error

  execution: 
    sequence: 80

  when: 
    event: EVENT.EVENT.BROWSER.CHANGE
    selection-type: Item(s)
    item(s): 
    - P75_NEW_FLAG

  client-side-condition: 
    type: Item = Value
    item: P75_NEW_FLAG
    value: E

  execution: 
    event-scope: Static
    type: Immediate

  actions: 
  - # ====== Action: Set Value ===================================
    id: 43961236833790348
    identification: 
      action: Set Value

    settings: 
      set-type: SQL Statement
      sql-statement: |
        select verified_note
        from wmg_tournament_players
        where id = :P75_ID
      items-to-submit: 
      - P75_ID
      escape-special-characters: true
      suppress-change-event: false

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P75_VERIFICATION_NOTE

    execution: 
      sequence: 10
      event: Open Notes for Error # 43961121223790347
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

  - # ====== Action: Open Region =================================
    id: 43961393806790349
    identification: 
      action: Open Region

    affected-elements: 
      selection-type: Region
      region: Note # 43960816507790344

    execution: 
      sequence: 20
      event: Open Notes for Error # 43961121223790347
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Close Notes =========================
  id: 46932389954678601
  identification: 
    name: Close Notes

  execution: 
    sequence: 90

  when: 
    event: EVENT.EVENT.BROWSER.CLICK
    selection-type: Button
    button: CANCEL_NOTE # 43961464901790350

  execution: 
    event-scope: Static
    type: Immediate

  actions: 
  - # ====== Action: Close Region ================================
    id: 46932486817678602
    identification: 
      action: Close Region

    affected-elements: 
      selection-type: Region
      region: Note # 43960816507790344

    execution: 
      sequence: 10
      event: Close Notes # 46932389954678601
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Save Note ===========================
  id: 46932552190678603
  identification: 
    name: Save Note

  execution: 
    sequence: 100

  when: 
    event: EVENT.EVENT.BROWSER.CLICK
    selection-type: Button
    button: ADD_NOTE # 43961015185790346

  execution: 
    event-scope: Static
    type: Immediate

  actions: 
  - # ====== Action: Execute Server-side Code ====================
    id: 46932677826678604
    identification: 
      action: Execute Server-side Code

    settings: 
      language: PE.PROPERTY.SOURCE_SNIPPET_LANG.LOV.PLSQL.D
      pl/sql-code: |
        update wmg_tournament_players
          set verified_note = :P75_VERIFICATION_NOTE
        where id = :P75_ID;
        :P75_VERIFICATION_NOTE := null;
      items-to-submit: 
      - P75_VERIFICATION_NOTE
      - P75_ID
      items-to-return: 
      - P75_VERIFICATION_NOTE
      suppress-change-event: false

    execution: 
      sequence: 10
      event: Save Note # 46932552190678603
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

  - # ====== Action: Refresh =====================================
    id: 46932765621678605
    identification: 
      action: Refresh

    affected-elements: 
      selection-type: Region
      region: Verify Results # 11998064850694896

    execution: 
      sequence: 30
      event: Save Note # 46932552190678603
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Close Region ================================
    id: 46932872883678606
    identification: 
      action: Close Region

    affected-elements: 
      selection-type: Region
      region: Note # 43960816507790344

    execution: 
      sequence: 20
      event: Save Note # 46932552190678603
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Toggle No Shows =====================
  id: 46933024822678608
  identification: 
    name: Toggle No Shows

  execution: 
    sequence: 40

  when: 
    event: EVENT.EVENT.BROWSER.CLICK
    selection-type: jQuery Selector
    jquery-selector: .noshow

  execution: 
    event-scope: Dynamic
    type: Immediate

  actions: 
  - # ====== Action: Remove Class ================================
    id: 46933172669678609
    identification: 
      action: Remove Class

    settings: 
      class: NA_ NA_Y

    affected-elements: 
      selection-type: Triggering Element

    execution: 
      sequence: 10
      event: Toggle No Shows # 46933024822678608
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Get player ID ===============================
    id: 46933267690678610
    identification: 
      name: Get player ID
      action: Set Value

    settings: 
      set-type: JavaScript Expression
      javascript-expression: this.triggeringElement.dataset.id
      suppress-change-event: false

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P75_ID

    execution: 
      sequence: 20
      event: Toggle No Shows # 46933024822678608
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

  - # ====== Action: Add Class ===================================
    id: 46933366229678611
    identification: 
      action: Add Class

    settings: 
      class: fa-square-selected-o fa-anim-spin

    affected-elements: 
      selection-type: Triggering Element

    execution: 
      sequence: 30
      event: Toggle No Shows # 46933024822678608
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Execute Server-side Code ====================
    id: 46933422045678612
    identification: 
      action: Execute Server-side Code

    settings: 
      language: PE.PROPERTY.SOURCE_SNIPPET_LANG.LOV.PLSQL.D
      pl/sql-code: |
        -- toggle the verification
        update wmg_tournament_players
           set no_show_flag = case
                                       when no_show_flag is null then 'Y'
                                       when no_show_flag = 'Y' then null
                                    end
             , verified_score_flag = case when no_show_flag is null then 'Y' else null end
             , verified_note = case when no_show_flag is null then 'No show' else null end
             , verified_by = case when no_show_flag is null then sys_context('APEX$SESSION','APP_USER') else null end
             , verified_on = case when no_show_flag is null then current_timestamp else null end
        where id = :P75_ID;
        
      items-to-submit: 
      - P75_ID

    execution: 
      sequence: 40
      event: Toggle No Shows # 46933024822678608
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

  - # ====== Action: Refresh =====================================
    id: 46933569768678613
    identification: 
      action: Refresh

    affected-elements: 
      selection-type: Region
      region: Verify Results # 11998064850694896

    execution: 
      sequence: 50
      event: Toggle No Shows # 46933024822678608
      fire-when-event-result-is: True
      fire-on-initialization: false

- # ====== Dynamic Action: Hoist Current Class =================
  id: 48742674051254432
  identification: 
    name: Hoist Current Class

  execution: 
    sequence: 110

  when: 
    event: EVENT.EVENT.FAMEWORK.APEXAFTERREFRESH
    selection-type: Region
    region: Rooms # 48741676080254422

  execution: 
    event-scope: Static
    type: Immediate

  actions: 
  - # ====== Action: Execute JavaScript Code =====================
    id: 48742766483254433
    identification: 
      action: Execute JavaScript Code

    settings: 
      code: $(this.affectedElements[0]).find(".is-current").parents("td").addClass("is-current")

    affected-elements: 
      selection-type: Region
      region: Rooms # 48741676080254422

    execution: 
      sequence: 10
      event: Hoist Current Class # 48742674051254432
      fire-when-event-result-is: True
      fire-on-initialization: true

- # ====== Dynamic Action: Toggle Room Verification ============
  id: 48742901542254435
  identification: 
    name: Toggle Room Verification

  execution: 
    sequence: 30

  when: 
    event: EVENT.EVENT.BROWSER.CLICK
    selection-type: jQuery Selector
    jquery-selector: .roomVerification

  execution: 
    event-scope: Dynamic
    type: Immediate

  actions: 
  - # ====== Action: Remove Class ================================
    id: 48743053202254436
    identification: 
      action: Remove Class

    settings: 
      class: vNO vYES vERR roomVerification

    affected-elements: 
      selection-type: Triggering Element

    execution: 
      sequence: 10
      event: Toggle Room Verification # 48742901542254435
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Get Room ID =================================
    id: 48743129773254437
    identification: 
      name: Get Room ID
      action: Set Value

    settings: 
      set-type: JavaScript Expression
      javascript-expression: this.triggeringElement.dataset.id
      suppress-change-event: false

    affected-elements: 
      selection-type: Item(s)
      item(s): 
      - P75_ID

    execution: 
      sequence: 20
      event: Toggle Room Verification # 48742901542254435
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

  - # ====== Action: Add Class ===================================
    id: 48743205658254438
    identification: 
      action: Add Class

    settings: 
      class: fa-square-selected-o fa-anim-spin

    affected-elements: 
      selection-type: Triggering Element

    execution: 
      sequence: 30
      event: Toggle Room Verification # 48742901542254435
      fire-when-event-result-is: True
      fire-on-initialization: false

  - # ====== Action: Execute Server-side Code ====================
    id: 48743399684254439
    identification: 
      action: Execute Server-side Code

    settings: 
      language: PE.PROPERTY.SOURCE_SNIPPET_LANG.LOV.PLSQL.D
      pl/sql-code: |
        -- toggle the verification
        update wmg_tournament_rooms
           set verified_score_flag = case
                                       when verified_score_flag is null then 'Y'
                                       when verified_score_flag = 'Y' then 'E'
                                       when verified_score_flag = 'E' then null
                                    end
             , verified_by = case when verified_score_flag = 'Y' or verified_score_flag is null then sys_context('APEX$SESSION','APP_USER') else null end
             , verified_on = case when verified_score_flag = 'Y' or verified_score_flag is null then current_timestamp else null end
             , verified_note = case when verified_score_flag = 'Y' or verified_score_flag is null then verified_note else null end
        where id = :P75_ID;
        
        -- returning verified_score_flag into :P75_NEW_FLAG;
        
      items-to-submit: 
      - P75_ID

    execution: 
      sequence: 40
      event: Toggle Room Verification # 48742901542254435
      fire-when-event-result-is: True
      fire-on-initialization: false
      stop-execution-on-error: true
      wait-for-result: true

  - # ====== Action: Refresh =====================================
    id: 48743441248254440
    identification: 
      action: Refresh

    affected-elements: 
      selection-type: Region
      region: Rooms # 48741676080254422

    execution: 
      sequence: 50
      event: Toggle Room Verification # 48742901542254435
      fire-when-event-result-is: True
      fire-on-initialization: false

computations: 
- # ====== Computation: P75_WEEK ===============================
  id: 11992252299685617
  identification: 
    item-name: P75_WEEK

  execution: 
    sequence: 10
    point: After Header

  computation: 
    type: SQL Query (return single value)
    sql-query: |
      select week
      from  wmg_tournament_sessions
         where id = :G_CURRENT_SESSION_ID

  server-side-condition: 
    type: Item is NULL
    item: P75_WEEK

processes: 
- # ====== Process: Load History ===============================
  id: 14530841320009035
  identification: 
    name: Load History
    type: Execute Code

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      insert into wmg_tournament_players (
         tournament_session_id
       , player_id
       , time_slot
       , active_ind
       , points
      )
      select s.id
           , p.id
           , '00:00'
           , 'Y'
           , load.points
      from wmg_tournament_sessions s
         , wmg_players p
         , wmg_wmgt_scores_tmp load
      where p.account = load.username
        and s.week = :P75_WEEK;
      

  execution: 
    sequence: 10
    point: Processing
    run-process: Once Per Page Visit (default)

  success-message: 
    success-message: Loaded!

  error: 
    display-location: Inline in Notification

  server-side-condition: 
    type: Never

  security: 
    authorization-scheme: Administration Rights # 46995203575692514425

  comments: 
    comments: This was used to load the points history for previous seasons

- # ====== Process: Refresh MV =================================
  id: 45125498558399130
  identification: 
    name: Refresh MV
    type: Execute Code

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: dbms_mview.refresh('wmg_rounds_unpivot_mv');

  execution: 
    sequence: 20
    point: Before Header
    run-process: Once Per Page Visit (default)

